!function(t){"use strict";function e(){var t=1.1;return t=/^1(.+)1$/.exec(t.toLocaleString())[1]}function a(t,e,a){var i,o,r,n;if(e|=0,i=Math.pow(10,e),t*=i,n=t>0|-(t<0),r=t%1===.5*n,o=Math.floor(t),r)switch(a){case"PHP_ROUND_HALF_DOWN":t=o+(n<0);break;case"PHP_ROUND_HALF_EVEN":t=o+o%2*n;break;case"PHP_ROUND_HALF_ODD":t=o+!(o%2);break;default:t=o+(n>0)}return(r?t:Math.round(t))/i}function i(e){var a;return a=t(e).is(".cpf_hide_element")?t(e):t(e).closest(".cpf_hide_element"),t(a).data("isactive")!==!1&&t(a).closest(".cpf-section").data("isactive")!==!1?(t(e).prop("disabled",!1),!0):(t(e).is(".cpf_hide_element")||t(e).prop("disabled",!0),!1)}function o(t){var e;if(void 0!==t.per_product_pricing)e=t.per_product_pricing;else if(void 0!==t.is_priced_individually)for(var a in t.is_priced_individually)if(e=t.is_priced_individually[a],"yes"==e)return!0;return e===!0}function r(e){t(e).length||(e="body"),e=t(e);var a=e.find(".iscpfdependson");a.each(function(e,a){t(a).each(function(e,a){n(t(a))})}),a.each(function(e,a){t(a).each(function(e,a){n(t(a),"cpflogic")})}),a.each(function(e,a){t(a).each(function(e,a){a=t(a),a.is(".cpf-section")&&(a=a.find(".cpf_hide_element")),a.each(function(e,a){i(t(a).find(".tm-epo-field"))})})}),t().selectric&&t(".tm-extra-product-options select").selectric("refresh"),t(".tm-owl-slider").each(function(){t(this).trigger("refresh.owl.carousel")});var o=[];e.find(".tm-product-image:checked,select.tm-product-image").each(function(){var e=t(this);i(e)&&""!==e.val()&&o.push(e)}),o.length&&o[o.length-1].trigger("tm_trigger_product_image"),G.trigger("cpflogicrun"),G.trigger("tmlazy")}function n(e,a){e.each(function(e,o){var r=t(this),n=r.data("matches"),c=r.data("toggle"),s=r.data("what"),l=r.data("fields"),p=0,m=!1;switch(c){case"show":m=!1;break;case"hide":m=!0}t.each(l,function(e,o){var r=!0;"cpflogic"==a&&(r=i(t(o.element))),r&&d(o)&&p++}),"all"==s?n==p&&(m=!m):p>0&&(m=!m),m?r.removeClass("tc-hidden"):r.addClass("tc-hidden"),r.data("isactive",m)})}function c(e,a){var o,r=!0,n=e.find(".cpf_hide_element");return t(n).each(function(e,n){if(n=t(n),i(n)){var c=n.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(c.length>0){switch(c=c[0]){case"cpf-type-radio":var d=n.find("input.tm-epo-field.tmcp-radio:checked");"isnotempty"==a?r=r&&d.length>0:"isempty"==a&&(r=r&&0===d.length);break;case"cpf-type-checkbox":var s=n.find("input.tm-epo-field.tmcp-checkbox:checked");"isnotempty"==a?r=r&&s.length>0:"isempty"==a&&(r=r&&0===s.length);break;case"cpf-type-select":var p=n.find("select.tm-epo-field.tmcp-select").children("option"),m=n.find("select.tm-epo-field.tmcp-select").children("option:selected"),f=p.index(m);""===p.eq(0).val()&&""===p.eq(0).attr("data-rulestype")&&(f-=1);var _="_"+f;_=_.length,o=n.find("select.tm-epo-field.tmcp-select").val(),o&&(o=o.slice(0,-_));break;case"cpf-type-textarea":o=n.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":o=n.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":o=n.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":o=n.find("input.tm-epo-field.tmcp-range").val()}r=r&&l(o,"",a)}else r=r&&!1}}),r}function d(e){var a,i,o,r=t(e.element),n=e.operator,d=e.value;if(!r.length)return!1;if(r.is(".cpf-section"))return c(r,n);var p=r.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(p.length>0){switch(p=p[0]){case"cpf-type-radio":var m=r.find("input.tm-epo-field.tmcp-radio"),f=r.find("input.tm-epo-field.tmcp-radio:checked");if("is"==n||"isnot"==n){if(0===f.length)return!1;i=m.index(f),o="_"+i,o=o.length,a=r.find("input.tm-epo-field.tmcp-radio:checked").val(),a&&(a=a.slice(0,-o))}else{if("isnotempty"==n)return f.length>0;if("isempty"==n)return 0===f.length}break;case"cpf-type-checkbox":var _=r.find("input.tm-epo-field.tmcp-checkbox"),u=r.find("input.tm-epo-field.tmcp-checkbox:checked");if("is"==n||"isnot"==n){if(0===u.length)return!1;var g=!1;return u.each(function(e,r){if(i=_.index(t(r)),o="_"+i,o=o.length,a=t(r).val(),a&&(a=a.slice(0,-o)),l(a,d,n))g=!0;else if("isnot"==n)return g=!1,!1}),g}if("isnotempty"==n)return u.length>0;if("isempty"==n)return 0===u.length;break;case"cpf-type-select":var h=r.find("select.tm-epo-field.tmcp-select").children("option"),v=r.find("select.tm-epo-field.tmcp-select").children("option:selected");i=h.index(v),""===h.eq(0).val()&&""===h.eq(0).attr("data-rulestype")&&(i-=1),o="_"+i,o=o.length,a=r.find("select.tm-epo-field.tmcp-select").val(),a&&(a=a.slice(0,-o));break;case"cpf-type-textarea":a=r.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":a=r.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":a=r.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":a=r.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return s(r,d,n)}return l(a,d,n)}return!1}function s(e,a,i){null!==e&&null!==a&&(a=a?parseInt(a):-1);var o,r=t(e).closest(".variations_form"),n='input[name^="variation_id"]';switch(r.find("input.variation_id").length>0&&(n="input.variation_id"),o=parseInt(r.find(n).val()),isNaN(o)&&(o=""),isNaN(a)&&(a=""),i){case"is":return""!==o&&o==a;case"isnot":return""!==o&&o!=a;case"isempty":return""===o||0===o;case"isnotempty":return""!==o&&0!==o;case"startswith":return o.startsWith(a);case"endswith":return o.endsWith(a);case"greaterthan":return parseFloat(o)>parseFloat(a);case"lessthan":return parseFloat(o)<parseFloat(a)}return!1}function l(e,a,i){switch(null!==e&&null!==a&&(e=encodeURIComponent(e),a=t.qtranxj_split?encodeURIComponent(t.qtranxj_split(decodeURIComponent(a))[tm_epo_q_translate_x_clogic_js.language]):encodeURIComponent(decodeURIComponent(a)),e=e?e.toLowerCase():"",a=a?a.toLowerCase():""),i){case"is":return null!==e&&e==a;case"isnot":return null!==e&&e!=a;case"isempty":return!(void 0!==e&&""!==e);case"isnotempty":return void 0!==e&&""!==e;case"startswith":return e.startsWith(a);case"endswith":return e.endsWith(a);case"greaterthan":return parseFloat(e)>parseFloat(a);case"lessthan":return parseFloat(e)<parseFloat(a)}return!1}function p(e){if(0!==t(e).length){if(t(e).is(".cpf-section"))return e.find(".tm-epo-field");var a=e.attr("class").split(" ").map(function(t){if(t.indexOf("cpf-type-",0)!==-1)return t}).filter(function(t,e,a){if(null!==t&&void 0!==t)return t});if(a.length>0)switch(a=a[0]){case"cpf-type-radio":return e.find(".tm-epo-field.tmcp-radio");case"cpf-type-checkbox":return e.find(".tm-epo-field.tmcp-checkbox");case"cpf-type-select":return e.find(".tm-epo-field.tmcp-select");case"cpf-type-textarea":return e.find(".tm-epo-field.tmcp-textarea");case"cpf-type-textfield":return e.find(".tm-epo-field.tmcp-textfield");case"cpf-type-color":return e.find(".tm-epo-field.tm-color-picker");case"cpf-type-range":return e.find(".tm-epo-field.tmcp-range");case"cpf-type-date":return e.find(".tm-epo-field.tmcp-date");case"cpf-type-variations":return e.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element")}else;}}function m(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function f(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.each(function(e,o){var r;r=t(o).is(".cpf-section")?t(o):t(o).find(".cpf-section"),r.each(function(e,o){var r=t(o),n=r.data("logic"),c=parseInt(r.data("haslogic")),d=[];1==c&&m(n)&&(t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,c=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=c!=n?o.find(".cpf_hide_element").eq(c):o):r=c!=n?i.find(".cpf_hide_element").eq(c):o,d.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",d),r.cpfdependson(d,n.toggle,n.what)))})})}function _(e){var a,i=t(e),o=i.find(".cpf-section");a=!i.is(".cpf-section")&&o,i.find(".cpf_hide_element").each(function(e,o){var r=t(o),n=r.data("logic"),c=parseInt(r.data("haslogic"));if(1==c&&m(n)){var d=[];t.each(n.rules,function(t,e){if(e){var o,r,n=e.section,c=e.element,s=e.operator,l=e.value;a?(o=a.filter('[data-uniqid="'+n+'"]'),r=c!=n?o.find(".cpf_hide_element").eq(c):o):r=c!=n?i.find(".cpf_hide_element").eq(c):o,d.push({element:r,operator:s,value:l})}}),r.data("iscpfdependson")?r.cpfdependson(r.data("cpfdependson-fields"),n.toggle,n.what,!0):(r.data("cpfdependson-fields",d),r.cpfdependson(d,n.toggle,n.what))}})}function u(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-tax-rate"),c=e.attr("data-prices-include-tax"),d=e.attr("data-is-vat-exempt"),s=e.attr("data-non-base-location-prices"),l=e.attr("data-base-taxes-of-one"),p=e.attr("data-modded-taxes-of-one");a&&a.data("tax-obj")&&(r=a.data("tax-obj"),r=r.tax_rate,n=r),o&&("1"!=c||i?t=parseFloat(t)*(1+r/100):"1"==d?t=parseFloat(t)*(1-n/100):"1"==s&&(t=parseFloat(t)-l*t+p*t))}return t/=1e4}function g(t,e,a,i){if(isNaN(parseFloat(t))&&(t=0),t*=1e4,e){var o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-taxes-of-one"),c=e.attr("data-prices-include-tax");a&&a.data("tax-obj")&&(r=a.data("tax-obj"),r=r.tax_rate),(o&&"1"==c||i)&&(t=parseFloat(t)-parseFloat(n*t))}return t/=1e4}function h(t,e,a){if(isNaN(parseFloat(t))&&(t=0),e){var i=e.attr("data-tax-display-mode");t="incl"==i?u(t,e,a):g(t,e,a)}return t}function v(t,e,a){if(e){var i=e.attr("data-taxable"),o=e.attr("data-tax-rate"),r=e.attr("data-tax-display-mode"),n=e.attr("data-prices-include-tax");i&&("excl"==r||"1"==n||(t=parseFloat(t)/(1+o/100)))}return t}function b(t,e,a,i,o){a||(t=h(t,e,o));var r="";return e&&i&&(r=e.attr("data-tax-string")),void 0===r&&(r=""),accounting.formatMoney(t,{symbol:tm_epo_js.currency_format_symbol,decimal:T,thousand:D,precision:tm_epo_js.currency_format_num_decimals,format:tm_epo_js.currency_format})+r}function y(e,a,i,o,r){var n=t(e);if(0!==n.length){var c=n.closest(".tmcp-field-wrap"),d=c.find(".before-amount,.after-amount"),s={price:i,original_price:r};if("yes"==tm_epo_js.tm_epo_auto_hide_price_if_zero&&t.tmempty(a)===!1||"yes"!=tm_epo_js.tm_epo_auto_hide_price_if_zero){var l=c.find(".tm-epo-field");l.length>0&&l.is(".tmcp-select")&&""===l.val()?(n.empty(),d.addClass("tm-hidden")):(o&&void 0!==o&&parseFloat(o)!==parseFloat(a)?n.html(t.fn.tm_template(Y.sale_price,{price:s})):n.html(t.fn.tm_template(Y.price,{price:s})),d.removeClass("tm-hidden"))}else n.empty(),d.addClass("tm-hidden")}}function w(t,e,a){O[O.length]={name:t,selector:e,func:a}}function k(e){var a={};return e.find(".variations select").each(function(){var e,i;e="undefined"!=typeof t(this).data("attribute_name")?t(this).data("attribute_name"):t(this).attr("name"),i=t(this).val(),a[e]=i}),a}function x(e,a){var i=[];if(e.find(".cpf-type-variations").each(function(o,r){i[o]=!0;var n,c,d=t(r).find(".tm-epo-variation-element"),s=!1;d.is("select")?(n=d.attr("data-tm-for-variation").tmjid(),c=d.val(),c&&(i[o]=!1),d.children("option").each(function(a,i){s=!1,e.find("#"+n).children("option").each(function(){if(t(this).attr("value")==t(i).attr("value"))return s=!0,!1}),s?t(i).removeAttr("disabled").show():t(i).attr("disabled","disabled").hide()})):d.each(function(r,d){d=t(d);var s=d.closest("li"),l=s.find(".tm-epo-variation-element");n=d.attr("data-tm-for-variation"),c=d.val(),d.is(":checked")&&(i[o]=!1);var p=k(e);p["attribute_"+n]=c;var m=t.fn.tm_find_matching_variations(a,p),f=m.shift(),_=f&&"is_in_stock"in f&&f.is_in_stock;f&&_?(d.removeAttr("disabled").removeClass("tm-disabled"),s.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){t(this).css("opacity","")}),l.removeAttr("disabled"),l.removeAttr("data-tm-disabled")):(d.attr("disabled","disabled").addClass("tm-disabled"),l.attr("disabled","disabled"),l.attr("data-tm-disabled","disabled"),s.addClass("tm-attribute-disabled").fadeTo("fast",.5),_||s.find("label").off())})}),i){i.shift();var o=!0;t.each(i,function(t,e){if(e===!1)return o=!1,!1}),o&&e.find(".cpf-type-variations").first().each(function(e,a){var i=t(a).find(".tm-epo-variation-element");i.is("select")||i.each(function(e,a){a=t(a);var i=a.closest("li"),o=i.find(".tm-epo-variation-element");a.removeAttr("disabled").removeClass("tm-disabled"),i.removeClass("tm-attribute-disabled").stop().css("opacity",""),o.removeAttr("disabled"),o.removeAttr("data-tm-disabled")})})}}function j(e){var a=e.data("product_variations"),i=parseInt(e.data("product_id"));if(i||(i=e.data("tc_product_id")),!a&&window.product_variations&&window.product_variations.product_id&&(a=window.product_variations.product_id),!a&&window.product_variations&&(a=window.product_variations),!a&&window["product_variations_"+i]&&(a=window["product_variations_"+i]),a)x(e,a);else if(I)x(e,I.variations);else{var o={action:"woocommerce_tm_get_variations_array",post_id:i};t.post(tm_epo_js.ajax_url,o,function(t){I=t,x(e,I.variations)},"json")}}function q(e,a){if(void 0===a)return!1;e=t(e);var i=e.find(".tm-epo-variation-element"),o=i.closest(".tm-epo-variation-section");return i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+a+"</div>"),!0):(e.find(".tm-stock").remove(),e.find(".variations").after('<div class="tm-stock">'+a+"</div>"),!0)}function F(t,e){if("no"!=tm_epo_js.tm_epo_global_move_out_of_stock){var a=t.find(".woocommerce-variation-availability").last();a.length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),q(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove()}}function N(e,n,c,s){function l(e){e||(e=Kt),e.find(".tm-range-picker").each(function(a,i){i=t(i);var o=i.attr("data-step").split("."),r=e.find("#"+i.attr("data-field-id").tmjid()),n=parseFloat(i.attr("data-min")),c=parseFloat(i.attr("data-max")),d=parseFloat(i.attr("data-start")),s=parseFloat(i.attr("data-step")),l=i.attr("data-show-picker-value"),p=i.closest("li").find(".tm-show-picker-value"),m=parseFloat(i.attr("data-noofpips")),f=null;o=1==o.length?0:o[1].length,isNaN(n)&&(n=0),isNaN(c)&&(c=0),c<=n&&c++,isNaN(d)&&(d=0),isNaN(s)&&(s=0),isNaN(m)&&(m=10),"yes"==i.attr("data-pips")&&(f={mode:"count",values:m,density:2,filter:function(t,e){return s<=0?0:t%1?2:1},stepped:!0,format:wNumb({decimals:o})}),noUiSlider.create(i.get(0),{direction:tm_epo_js.text_direction,start:d,step:s,connect:"lower",behaviour:"tap",format:wNumb({mark:".",decimals:o,thousand:""}),range:{min:[n],max:[c]},pips:f});var _=i.find(".noUi-handle-lower");i.get(0).noUiSlider.on("slide",function(){_.trigger("tmmovetooltip"),r.trigger("change.cpf")}),i.get(0).noUiSlider.on("update",function(t,e){e=0,"left"!=l&&"right"!=l&&_.attr("title",accounting.formatNumber(t[e],{decimal:T,thousand:D,precision:o})),r.val(t[e]).change(),""!==l&&p.html(accounting.formatNumber(t[e],{decimal:T,thousand:D,precision:o}))}),"left"!=l&&"right"!=l&&(_.attr("title",i.attr("data-start")),t.tm_tooltip(_)),""!==l&&p.html(d)})}function p(e){function a(e,a){a=t(a);var i,o=t.tm_datepicker._getInst(a[0]),r=a.data("tc-enabled_only_dates"),n=a.data("tc-disabled_weekdays"),c=a.data("tc-disabled_dates"),d=a.data("tc-format"),s=e.getDay();return!!t.tm_datepicker._isInRange(o,e)&&(""!==r?(i=t.tm_datepicker.formatDate(d,e),r.indexOf(i)!=-1):n.indexOf(s.toString())==-1&&(""===c||(i=t.tm_datepicker.formatDate(d,e),c.indexOf(i)==-1)))}if(t.tm_datepicker){e||(e=Kt);var i=t("input").map(function(){return this.id}).get().join(" ");e.find(".tm-epo-timepicker").each(function(e,a){var o=t(a),r=""!==o.attr("data-min-time").trim()?o.attr("data-min-time").trim():null,n=""!==o.attr("data-max-time").trim()?o.attr("data-max-time").trim():null,c=o.attr("data-time-format").trim(),d=o.attr("data-time-theme").trim(),s=o.attr("data-time-theme-size").trim(),l=o.attr("data-time-theme-position").trim(),p=o.attr("data-tranlation-hour").trim(),m=o.attr("data-tranlation-minute").trim(),f=o.attr("data-tranlation-second").trim();p||(p=tm_epo_js.hourText),m||(m=tm_epo_js.minuteText),f||(f=tm_epo_js.secondText),o.tm_timepicker({isRTL:tm_epo_js.isRTL,hourText:p,minuteText:m,secondText:f,timeFormat:c,minTime:r,maxTime:n,closeText:tm_epo_js.closeText,beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+d+" tm-timepicker tm-datepicker tm-datepicker-"+l+" tm-datepicker-"+s).appendTo("body"),Q.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){o.tm_timepicker("hide")}),t("body").addClass("tm-static"),o.prop("readonly",!0),G.trigger({type:"tm-timepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),o.prop("readonly",!1),o.trigger("change")}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tm-epo-datepicker").each(function(a,o){var r=t(o),n=parseInt(r.attr("data-start-year").trim()),c=parseInt(r.attr("data-end-year").trim()),d=r.attr("data-min-date").trim(),s=r.attr("data-max-date").trim(),l=r.attr("data-disabled-dates").trim(),p=r.attr("data-enabled-only-dates").trim(),m=r.attr("data-disabled-weekdays").trim().split(","),f=r.attr("data-date-format").trim(),_=r.attr("data-date-showon").trim(),u=r.attr("data-date-defaultdate").trim(),g=r.attr("data-date-theme").trim(),h=r.attr("data-date-theme-size").trim(),v=r.attr("data-date-theme-position").trim();if(""!==l){var b=l.split(","),y=l.indexOf(",");y!=-1&&b.length>0&&(l=b)}if(""!==p){var w=p.split(","),k=p.indexOf(",");k!=-1&&w.length>0&&(p=w)}d=""===d?""===n?null:new Date(n,0,1):d.tm_isNumeric()||isNaN(new Date(d).getTime())?d:new Date(d),s=""===s?""===c?null:new Date(c,11,31):s.tm_isNumeric()||isNaN(new Date(s).getTime())?s:new Date(s),r.data("tc-enabled_only_dates",p),r.data("tc-disabled_weekdays",m),r.data("tc-disabled_dates",l),r.data("tc-format",f),r.tm_datepicker({monthNames:tm_epo_js.monthNames,monthNamesShort:tm_epo_js.monthNamesShort,dayNames:tm_epo_js.dayNames,dayNamesShort:tm_epo_js.dayNamesShort,dayNamesMin:tm_epo_js.dayNamesMin,isRTL:tm_epo_js.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:_,defaultDate:u,buttonText:"",showButtonPanel:!0,firstDay:tm_epo_js.first_day,closeText:tm_epo_js.closeText,currentText:tm_epo_js.currentText,dateFormat:f,minDate:d,maxDate:s,onSelect:function(a,i){var o=t(this),r="#"+o.attr("id").tmjid(),n=o.attr("data-date-format"),c=o.tm_datepicker("getDate"),d="",s="",f="",_=e.find(r+"_day"),u=e.find(r+"_month"),g=e.find(r+"_year");if(c){d=c.getDate(),s=c.getMonth()+1,f=c.getFullYear();var h=t.tm_datepicker.formatDate(n,c);if(m.indexOf(c.getDay().toString())!=-1||l.indexOf(h)!=-1||""!==p&&p.indexOf(h)==-1){var v=o.data("tm-last-date");v=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(v),o.tm_datepicker("setDate",v),v?(c=o.tm_datepicker("getDate"),d=c.getDate(),s=c.getMonth()+1,f=c.getFullYear()):(d="",s="",f="")}}_.val(d),u.val(s),g.val(f),o.data("tm-last-date",o.val())},beforeShow:function(e,a){t(a.dpDiv).removeClass(i).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+g+" tm-datepicker tm-datepicker-"+v+" tm-datepicker-"+h).appendTo("body"),Q.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){r.tm_datepicker("hide")}),t("body").addClass("tm-static"),r.prop("readonly",!0),G.trigger({type:"tm-datepicker-beforeShow",input:e,inst:a})},onClose:function(e,a){t("body").removeClass("tm-static"),r.prop("readonly",!1),r.trigger("change")},beforeShowDay:function(e){var a,i=e.getDay();return""!==p?(a=t.tm_datepicker.formatDate(f,e),[p.indexOf(a)!=-1,""]):m.indexOf(i.toString())!=-1?[!1,""]:""!==l?(a=t.tm_datepicker.formatDate(f,e),[l.indexOf(a)==-1,""]):[!0,""]}}),t("#ui-tm-datepicker-div").hide()}),e.find(".tmcp-date-select").on("change.cpf",function(a){var i="#"+t(this).attr("data-tm-date").tmjid(),o=e.find(i),r=o.attr("data-date-format"),n=e.find(i+"_day").val(),c=e.find(i+"_month").val(),d=e.find(i+"_year").val(),s=t.tm_datepicker.formatDate(r,new Date(d,c-1,n));n>0&&c>0&&d>0?(o.tm_datepicker("setDate",s),o.trigger("change")):(o.val(""),o.trigger("change.cpf"))}).on("focus.cpf",function(i){var o="#"+t(this).attr("data-tm-date").tmjid(),r=e.find(o),n=e.find(o+"_day"),c=e.find(o+"_month"),d=e.find(o+"_year"),s=n.val(),l=c.val(),p=d.val();if(""!==p&&""!==l&&""!==s||""!==p&&""!==l&&""===s||""!==s&&""!==p&&""===l||""!==s&&""!==l&&""===p){var m=t(this);m.find("option").each(function(){var e=t(this),i=e.val(),o=p+"-"+l+"-"+s;if(m.is(".tmcp-date-day")){if(""===p||""===l)return;o=p+"-"+l+"-"+i}else if(m.is(".tmcp-date-month")){if(""===p||""===s)return;o=p+"-"+i+"-"+s}else if(m.is(".tmcp-date-year")){if(""===s||""===l)return;o=i+"-"+l+"-"+s}if(""!==i)try{var n=t.tm_datepicker.parseDate("yy-mm-dd",o);n&&(a(n,r)?e.prop("disabled",!1):e.prop("disabled",!0))}catch(t){e.prop("disabled",!0)}})}else n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1),d.find("option").prop("disabled",!1)}),t(window).on("resizestart",function(){var e=t(document.activeElement);if(e.is(".hasDatepicker")){if(e.data("resizestarted",!0),t(window).width()<768)return void e.data("resizewidth",!0);e.tm_datepicker("hide")}}),t(window).on("resizestop",function(){var e=t(document.activeElement);e.is(".hasDatepicker")&&e.data("resizestarted")&&(e.data("resizewidth")&&e.tm_datepicker("hide"),e.tm_datepicker("show")),e.data("resizestarted",!1),e.data("resizewidth",!1)})}}function m(){Q.on("click.cpfurl change.cpfurl tmredirect",".use_url_container .tmcp-radio, .use_url_container .tmcp-radio+label",function(e){var a=t(this).attr("data-url");a&&window.location!=a&&(e.preventDefault(),window.location=a)}),Q.on("change.cpfurl tmredirect",".use_url_container .tmcp-select",function(e){var a=t(this).children("option:selected"),i=a.attr("data-url");i&&window.location!=i&&(e.preventDefault(),window.location=i)})}function w(a){if("yes"==tm_epo_js.tm_epo_global_enable_validation){var i={};return Kt.find(".tmcp-ul-wrap").each(function(e,a){a=t(a);var o=a.data("tm-validation");if(o&&"object"===t.tmType(o)){var r=a.find(".tm-epo-field"),n=r.first().attr("name");a.is(".tm-extra-product-options-radio.tm-element-ul-radio")&&(n=r.last().attr("name")),a.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?r.each(function(e,n){"required"in o&&(o.required=function(e){var i=a.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===i?r.last().attr("name")==t(e).attr("name"):i<=0}),i[t(n).attr("name")]=o}):i[n]=o}}),a.removeData("tc_validator"),a.tc_validate({focusInvalid:!1,ignore:E+",input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select",rules:i,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")?t.appendTo(e.closest(".tmcp-ul-wrap").find(".tmcp-field-wrap").last()):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(a,i){setTimeout(function(){e.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),i.errorList&&i.errorList[0]&&i.errorList[0].element&&rt(t(i.errorList[0].element))},submitHandler:function(t){return e.find(H).first().addClass("disabled"),x()}}),!0}return!1}function k(){var t=C();G.trigger("tm-from-submit",{epo:{form:t,tm_apply_validation:w,form_submit_events:Zt,apply_submit_events:x,main_cart:Ht,main_epo_inside_form:Ut,product_id_selector:$t,epo_id_selector:Jt,product_id:c,this_epo_container:Kt,this_totals_container:te,this_epo_totals_container:ee}}),!w(t)&&Zt.length&&t.on("submit",x)}function x(a){var i,o,r,n=!0;for(r=0;r<Zt.length;r++)if(i=Zt[r],o=typeof i,"object"==o){var c="function"==typeof i.trigger||!1;if(c&&!i.trigger()){n=!1;break}}for(r=0;r<Zt.length;r++)i=Zt[r],o=typeof i,"object"==o&&(n?i.on_true():i.on_false());return n||setTimeout(function(){e.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled"),t.tcepo.temp_floatbox&&"object"==typeof t.tcepo.temp_floatbox&&t.tcepo.temp_floatbox.cancelfunc()},100),n}function q(){if(!n&&tm_epo_js.floating_totals_box&&"disable"!=tm_epo_js.floating_totals_box&&Ht&&ee.length){var e,a=t('<div class="tm-floating-box '+tm_epo_js.floating_totals_box+'"></div>'),i=!1,o=t(".tm-floating-box-nks"),r=t(".tm-floating-box-alt"),c=!1;o.length>0?(i=!0,a.removeClass("top left right bottom").appendTo(o).show()):r.length>0?a.removeClass("top left right bottom").appendTo(r).hide():a.appendTo("body").hide(),(o.length>0||r.length>0)&&(c=!0);var d=function(){return"always"==tm_epo_js.floating_totals_box_visibility?void a.show():void(t(window).scrollTop()>100||c?a.is(":hidden")&&!a.is(":empty")||c?i?a.show():a.fadeIn():!a.is(":hidden")&&a.is(":empty")&&(i?a.hide():a.fadeOut()):a.is(":hidden")||(i?a.hide():a.fadeOut()))},s=function(){var o=ee.data("tm-html"),r=ee.data("tm-floating-box-data"),n=[];if(r&&r.length&&t.each(r,function(e,a){""===a.title&&(a.title="&nbsp;"),""===a.value&&(a.value="&nbsp;"),a.title?(a.title=t("<div>"+a.title+"</div>"),a.title.find("span").remove(),a.title=a.title.html()):a.title="&nbsp;",i&&(""!==a.label_show&&(a.title=""),""!==a.value_show&&(a.value="")),n.push({label_show:a.label_show,value_show:a.value_show,title:a.title,value:a.value,quantity:a.quantity,price:b(a.price,ee,!0,!1)})}),o&&""!==o||i?d():(o="",a.hide()),n&&!n.length&&n.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),e=t.fn.tm_template(c?Y.tc_floating_box_nks:Y.tc_floating_box,{html_before:tm_epo_js.floating_totals_box_html_before,html_after:tm_epo_js.floating_totals_box_html_after,option_label:tm_epo_js.i18n_option_label,option_value:tm_epo_js.i18n_option_value,option_qty:tm_epo_js.i18n_option_qty,option_price:tm_epo_js.i18n_option_price,values:n,totals:o}),a.html(e),d(),"yes"==tm_epo_js.floating_totals_box_add_button){var s=Ht.find(H).first();s.tm_clone().addClass(".tc-add-to-cart-button").on("click",function(){s.click()}).appendTo(a)}};s(),Ht.on("tm-epo-after-update",function(){s()}),i||(d(),"always"==tm_epo_js.floating_totals_box_visibility&&t(window).on("scroll",function(){d()}))}}function N(t,e,a){return C(t,e,a)}function C(t,e,a){return e||(e="form"),z(t,a).closest(e)}function z(t,a){var i="";a&&(i=i+'[value="'+a+'"]'),t||(t=e);var o=t.find(P+i);return 0===o.length&&(o=t.find(R+i)),o.last()}function I(){Q.tcready(function(){V()}),G.trigger("tm-epo-compatibility",{epo:{form:C(),main_cart:Ht,main_epo_inside_form:Ut,product_id_selector:$t,epo_id_selector:Jt,product_id:c,this_epo_container:Kt,this_totals_container:te,this_epo_totals_container:ee}})}function V(){var e=C(),a=e.find(".wc-bookings-booking-form"),i=a.find(".tm-epo-counter");if(i.length>0){e.on("submit",function(){e.find(H).first().addClass("disabled")}),"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&t(".wc-bookings-booking-form-button").before(te),ee.data("tc_is_bookings",1),ee.data("bookings_form",a),ee.data("bookings_form_init",0),ee.data("price",0),te.find(".cpf-product-price").val(0);for(var o=findEventHandlers("change",i),r=!1,n=!1,d=o.length-1;d>=0&&n!==!0;d--)if(o[d].events)for(var l=o[d].events.length-1;l>=0;l--)if(o[d].events[l].selector&&"input, select"==o[d].events[l].selector){r=o[d].events[l].handler,n=!0;break}if(Q.ajaxSuccess(function(t,e,a){if(a.data&&e&&e.responseText){var i=a.data.tmparseParams();i.action&&"wc_bookings_get_blocks"==i.action&&(ee.data("price",0),te.find(".cpf-product-price").val(0),Ht.trigger({type:"tm-epo-update",product_false:!0}))}}),r!==!1&&n){var p=i.closest(".wc-bookings-booking-form");p.off("change","input, select",r).on("change.tcbookings","input, select",function(a){var i=t(this),o=t(this).closest("form"),r=o.find("input.required_for_calculation"),n=!0;if(t.each(r,function(e,a){var i=t(a).val();i||(n=!1)}),n){if(w(e)&&!e.tc_validate().form())return void a.stopImmediatePropagation();a.stopImmediatePropagation();var d={action:"tc_epo_bookings_calculate_costs",form:o.serialize(),post_id:c};t.post(tm_epo_js.ajax_url,d,function(t){t&&"SUCCESS"==t.result&&"product_price"in t?(ee.data("price",t.product_price),te.find(".cpf-product-price").val(t.product_price),ee.data("bookings_form_init",1),Ht.trigger({type:"tm-epo-update"}),i.trigger("tc_bookings_change")):t&&"ERROR"==t.result&&(ee.data("bookings_form_init",0),o.find(".wc-bookings-booking-cost").show().html(t.html))},"json")}}),p.on("change tc_bookings_change","input, select",r)}}Ut||i.length>0&&(Kt.find(".tm-epo-field").not(".tm-epo-counter").off("change.tcbookings").on("change.tcbookings",function(t){i.trigger("change")}),t.ajaxPrefilter(function(e,a,i){if("post"===e.type.toLowerCase()&&a.data&&a.data.action&&"wc_bookings_calculate_costs"==a.data.action&&a.data.form){var o=t(L+".tm-cart-main.tm-product-id-"+c+'[data-epo-id="'+s+'"]');if(1==o.length){var r=a.data.form.tmparseParams(!0);r=t.extend(r,o.tm_aserializeObject()),a.data.form=t.param(r,!1),e.data=t.param(t.extend(a.data,{}),!1)}}}))}function $(){Ht||(Ht=N(e,"form",c));var a=C(),i=a.find(L).length,o=a.find(".tc-totals-form").length;i>0&&(Ut=!0),o>0&&(Wt=!0),Wt||(Zt[Zt.length]={trigger:function(){return!0},on_true:function(){var e=t(".tc-totals-form.tm-product-id-"+c+'[data-epo-id="'+s+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo-normal"></div>');return a.find(".tm-formepo-normal").remove(),i.append(e),a.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}}),Ut||(Zt[Zt.length]={trigger:function(){return!0},on_true:function(){var e=t(L+".tm-product-id-"+c+'[data-epo-id="'+s+'"]').tm_clone(),i=t('<div class="tm-hidden tm-formepo"></div>');return a.find(".tm-formepo").remove(),i.append(e),a.append(i),!0},on_false:function(){setTimeout(function(){t(".tm-formepo").remove()},100)}})}function J(){if(Bt&&"yes"==tm_epo_js.tm_epo_hide_add_cart_button){var t=e.find(H).first();Qt?t.removeClass("tc-hide-add-to-cart-button"):t.addClass("tc-hide-add-to-cart-button")}}function K(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this),a=e.closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?(i=parseInt(a.val()),i<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function tt(e,a){var i,o=parseInt(e.attr("data-limit")),r=!1;return o=parseInt(e.attr("data-exactlimit")),!(o>0&&(r=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e=t(this),a=e.closest("li.tmcp-field-wrap").find("input.tm-qty");a.length>0?(i=parseInt(a.val()),i<=0&&(i=1),r+=i):r+=1}),r>o))||(a&&e.prop("checked","").trigger("change"),!1)}function et(a){var o=!0,r=!1;return a.each(function(){var a=t(this).find("[type='checkbox'][data-exactlimit]");if(a.length&&i(a)){var n=parseInt(a.attr("data-exactlimit")),c=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this),i=a.closest("li.tmcp-field-wrap").find("input.tm-qty");i.length>0?(e=parseInt(i.val()),e<=0&&(e=1),c+=e):c+=1});var d=t(this).closest(".cpf_hide_element"),s=d.find("div.tm-error-min");if(n!==c){o=!1,r=t(this);var l=tm_epo_js.tm_epo_global_validator_messages.epoexact.replace("{0}",n);s.length&&s.remove(),t(this).after('<div class="tm-error-min tm-error">'+l+"</div>"),e.find(H).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")}else s.remove()}}),r&&(Xt=r),o}function at(e){Zt[Zt.length]={trigger:function(){var t=et(e);return t},on_true:function(){return!0},on_false:function(){return rt(t(e).find(".tm-epo-field").first()),!0}}}function it(e){var a=!0,o=!1;
return e.each(function(){var e=t(this).find("[type='checkbox'][data-minimumlimit]");if(e.length&&i(e)){var r=parseInt(e.attr("data-minimumlimit")),n=0;t(this).find("input.tm-epo-field[type='checkbox']:checked").each(function(){var e,a=t(this),i=a.closest("li.tmcp-field-wrap").find("input.tm-qty");i.length>0?(e=parseInt(i.val()),e<=0&&(e=1),n+=e):n+=1});var c=t(this).closest(".cpf_hide_element"),d=c.find("div.tm-error-min");if(r>n){a=!1,o=t(this);var s=tm_epo_js.tm_epo_global_validator_messages.epomin.replace("{0}",r);d.length&&d.remove(),t(this).after('<div class="tm-error-min tm-error">'+s+"</div>")}else d.remove()}}),o&&(Xt=o),a}function ot(t){Zt[Zt.length]={trigger:function(){var e=it(t);return e},on_true:function(){return!0},on_false:function(){return rt(),!0}}}function rt(e){var a=Xt||e;if(a){var i=a.closest(".cpf-section"),o=i.find(".tm-section-link"),r=a.closest(".cpf_hide_element");if(i.find(".tm-toggle").length&&i.find(".tm-toggle").trigger("openwrap.tmtoggle"),window.tc_validation_offset||(window.tc_validation_offset=-100),i.is(".section_popup"))t(window).tc_scrollTo(o,300,window.tc_validation_offset),o.trigger("click.tmsectionpoplink");else if(i.is(".tm-owl-slider-section")){var n=a.closest(".owl-item").index();i.find(".owl-carousel").trigger("to.owl.carousel",[n,100]),setTimeout(function(){i.find(".owl-carousel").trigger("refresh.owl.carousel"),r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset)},200)}else r.length>0&&t(window).tc_scrollTo(r,300,window.tc_validation_offset);e||(Xt=!1)}}function nt(){ee.each(function(){var a=t(this).attr("data-cart-id"),i=e.find(".tm-extra-product-options.tm-cart-"+a),o=t(this).data("subscription-period"),r=t(this).data("variations-subscription-period"),n=i.find(".tmcp-field").closest(".tmcp-field-wrap"),c=t(this).data("is-subscription");if(c){n.find(".tmperiod").remove();var d=n.find(".amount").is(".hidden");d=d?" hidden":"";var s='input[name^="variation_id"]',l=t(this).data("tm_for_cart");if(l){l.find("input.variation_id").length>0&&(s="input.variation_id");var p=l.find(s).val();p||(p=0),r[p]&&(o=r[p])}void 0===window.subscription_period_separator&&(window.subscription_period_separator=" / "),n.find(".amount").after('<span class="tmperiod'+d+'">'+window.subscription_period_separator+o+"</span>"),t(this).find(".tmperiod").remove(),t(this).find(".amount.options").after('<span class="tmperiod">'+window.subscription_period_separator+o+"</span>"),t(this).find(".amount.final").after('<span class="tmperiod">'+window.subscription_period_separator+o+"</span>")}})}function ct(e){var a=e.attr("data-container-id");if(!a){var i=t(e).closest(".composite_form");a=i.find(".composite_data").data("container_id")}return a}function dt(t){var a=e.find(".bto_form_"+t+",#composite_form_"+t+",#composite_data_"+t).data("price_data");return a}function st(t){return" .review .price_"+t+", .summary_element_"+t+" .summary_element_price"}function lt(t){return t.attr("data-item-id")||t.attr("data-item_id")}function pt(e,a,i){if("object"==typeof a&&(a=a[0],isNaN(parseFloat(a))&&(a=0)),1!=i)return a;var o=e.data("product-price-rules"),r=e.data("tm_for_cart");if(!o||!r)return a;var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find(E).last(),d=parseFloat(c.val()),s=r.find(n).val();return s||(s=0),isNaN(d)&&(e.attr("data-is-sold-individually")||0===c.length)&&(d=1),(o[s]&&0!==s||o[0])&&(o[s]||(s=0),t(o[s]).each(function(t,e){var i=parseFloat(e.min),o=parseFloat(e.max),r=e.type,n=parseFloat(e.value);if(void 0===a&&(a=0),i<=d&&d<=o)switch(r){case"percentage":return a*=1-n/100,!1;case"price":return a-=n,!1;case"fixed":return a=n,!1}})),a}function mt(e,a){if(1!=a)return!1;var i=[!1,!1],o=e.data("product-price-rules"),r=e.data("tm_for_cart");if(!o||!r)return!1;var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find(E).last(),d=parseFloat(c.val()),s=r.find(n).val();return s||(s=0),isNaN(d)&&(e.attr("data-is-sold-individually")||0===c.length)&&(d=1),(o[s]&&0!==s||o[0])&&(o[s]||(s=0),t(o[s]).each(function(t,e){var a=parseFloat(e.min),o=parseFloat(e.max),r=e.type,n=parseFloat(e.value);if(a<=d&&d<=o)switch(r){case"percentage":return i=[n,r],!1;case"price":return i=[n,r],!1;case"fixed":return i=[n,r],!1}})),i}function ft(e){var i=e.data("product-price-rules"),o=parseFloat(e.data("price")),r=e.data("tm_for_cart");if(!i||!r)return o;var n=e.data("qty_element"),c=parseFloat(n.val()),d=e.data("variation_id_selector"),s=parseFloat(d.val());return!(d.length>0&&(!s||0===s))&&(s||(s=0),i[s]||(s=0),isNaN(c)&&(e.attr("data-is-sold-individually")||0===n.length)&&(c=1),(i[s]&&0!==s||i[0])&&(i[s]||(s=0),t(i[s]).each(function(t,e){var i=parseFloat(e.min),r=parseFloat(e.max),n=e.type,d=parseFloat(e.value);if(i<=c&&c<=r){var s=parseInt(tm_epo_js.currency_format_num_decimals);switch(n){case"percentage":return o-=Math.ceil(o*(d/100)*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1;case"price":return o-=d,o=Math.ceil(o*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1;case"fixed":return o=d,o=Math.ceil(o*Math.pow(10,s)-.5)*Math.pow(10,-s),o=a(o,s),o<0&&(o=0),!1}}})),o)}function _t(a,i){var o,r,n,c,d,s,l,p=t(a),m=p,f=!0,_=p.is(".tmcp-range");if(i)o=i.bto,r=i.cart,n=i.current_variation,c=i.is_bto,d=i.bundleid,s=i.totals,l=i.apply_dpd;else{o=p.closest(Gt),r=p.closest(".cart");var u='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(u="input.variation_id"),n=r.find(u).val(),c=o.length>0,d=r.attr("data-product_id"),d||(d=r.closest(".component_content").attr("data-product_id"),d||(d=0)),n||(n=0),s=c?e.find(".tm-epo-totals.tm-cart-"+d):ee,l=s.data("fields-price-rules")}p.is("select")&&(m=p.find("option:selected"));var g,v,w,k,x,j,q,F,N,C,z,T,D=m.data("rules"),I=m.data("rulestype"),O=m.data("original-rules");if(void 0===O&&(O=D),c){var S=r.find(".cpf-bto-price");S.length>0&&(S.data("per_product_pricing")?N=S.val():(N=0,f=!1),S.val(N))}else s.length&&(N=ft(s));if(f!==!1)if(k="","object"==typeof D){switch(n in D?(x=D[n],j=O[n]):(g=p.closest(".tmcp-ul-wrap").data("rules"),w=p.closest(".tmcp-ul-wrap").data("original-rules"),x="object"==typeof g&&n in g?g[n]:D[0],j="object"==typeof w&&n in w?w[n]:O[0]),"object"==typeof I?n in I?k=I[n]:(v=p.closest(".tmcp-ul-wrap").data("rulestype"),k="object"==typeof v&&n in v?v[n]:I[0]):(I=p.closest(".tmcp-ul-wrap").data("rulestype"),"object"==typeof I&&(k=n in I?I[n]:I[0])),"object"==typeof k&&(k=k[0]),p.is("select")?p.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),"fee"==k&&(l=0),k){case"":case"fee":x=pt(s,x,l),j=pt(s,j,l);break;case"percent":x=x/100*N,j=j/100*N;break;case"percentcurrenttotal":ie.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=pt(s,x,l)*m.val().length,j=pt(s,j,l)*m.val().length;break;case"charpercent":x=x/100*N*m.val().length,j=j/100*N*m.val().length;break;case"charnospaces":x=pt(s,x,l)*m.val().replace(/\s/g,"").length,j=pt(s,j,l)*m.val().replace(/\s/g,"").length;break;case"charnofirst":C=m.val().length-1,C<0&&(C=0),x=pt(s,x,l)*C,j=pt(s,j,l)*C;break;case"charnon":z=parseInt(m.attr("data-freechars")),isNaN(z)&&(z=0),C=m.val().length-z,C<0&&(C=0),x=pt(s,x,l)*C,j=pt(s,j,l)*C;break;case"charpercentnon":z=parseInt(m.attr("data-freechars")),isNaN(z)&&(z=0),C=m.val().length-z,C<0&&(C=0),x=x/100*N*C,j=j/100*N*C;break;case"charnonnospaces":z=parseInt(m.attr("data-freechars")),isNaN(z)&&(z=0),C=m.val().replace(/\s/g,"").length-z,C<0&&(C=0),x=pt(s,x,l)*C,j=pt(s,j,l)*C;break;case"charpercentnonnospaces":z=parseInt(m.attr("data-freechars")),isNaN(z)&&(z=0),C=m.val().replace(/\s/g,"").length-z,C<0&&(C=0),x=x/100*N*C,j=j/100*N*C;break;case"charpercentnofirst":C=m.val().length-1,C<0&&(C=0),x=x/100*N*C,j=j/100*N*C;break;case"step":case"stepfee":_?(x=pt(s,x,l)*m.val(),j=pt(s,j,l)*m.val()):(x=pt(s,x,l)*m.val().tmtoFloat(),j=pt(s,j,l)*m.val().tmtoFloat());break;case"currentstep":case"currentstepfee":_?(x=pt(s,m.val(),l),j=pt(s,m.val(),l)):(x=pt(s,m.val().tmtoFloat(),l),j=pt(s,m.val().tmtoFloat(),l));break;case"intervalstep":_&&(T=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min")),x=pt(s,x,l)*(m.val()-T),j=pt(s,j,l)*(m.val()-T));break;case"row":x=pt(s,x,l)*((m.val().match(new RegExp("\n","g"))||[]).length+1),j=pt(s,j,l)*((m.val().match(new RegExp("\n","g"))||[]).length+1)}p.data("tm-quantity")&&(x*=parseFloat(p.data("tm-quantity")),j*=parseFloat(p.data("tm-quantity"))),q=b(x,s,!1,!1,m),F=b(j,s,!1,!1,m),m.data("price",h(x,s,m)),m.data("original_price",h(j,s,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}else{var A=p.closest(".tmcp-ul-wrap");if(D=A.data("rules"),O=A.data("original-rules"),"object"==typeof D){switch(x=n in D?D[n]:D[0],j="object"==typeof O?n in O?O[n]:O[0]:x,"object"==typeof I?n in I?k=I[n]:(v=A.data("rulestype"),k="object"==typeof v&&n in v?v[n]:I[0]):(I=A.data("rulestype"),"object"==typeof I&&(k=n in I?I[n]:I[0])),"object"==typeof k&&(k=k[0]),p.is("select")?p.find("option").each(function(){var e=t(this);e.removeData("tm-price-for-late"),e.removeData("islate"),e.removeClass("tm-epo-late-field")}):(m.removeData("tm-price-for-late"),m.removeData("islate"),m.removeClass("tm-epo-late-field")),k){case"":case"fee":x=pt(s,x,l),j=pt(s,j,l);break;case"percent":x=x/100*N,j=j/100*N;break;case"percentcurrenttotal":ie.push({setter:m,price:x,bundleid:d}),m.data("tm-price-for-late",x).data("islate",1).addClass("tm-epo-late-field"),x=0,j=0;break;case"char":x=pt(s,x,l)*m.val().length,j=pt(s,j,l)*m.val().length;break;case"charpercent":x=x/100*N*m.val().length,j=j/100*N*m.val().length;break;case"step":case"stepfee":_?(x=pt(s,x,l)*m.val(),j=pt(s,j,l)*m.val()):(x=pt(s,x,l)*m.val().tmtoFloat(),j=pt(s,j,l)*m.val().tmtoFloat());break;case"currentstep":case"currentstepfee":_?(x=pt(s,m.val(),l),j=pt(s,m.val(),l)):(x=pt(s,m.val().tmtoFloat(),l),j=pt(s,m.val().tmtoFloat(),l));break;case"intervalstep":_&&(T=parseFloat(t('.tm-range-picker[data-field-id="'+m.attr("id")+'"]').attr("data-min")),x=pt(s,x,l)*(m.val()-T),j=pt(s,j,l)*(m.val()-T))}p.data("tm-quantity")&&(x*=parseFloat(p.data("tm-quantity")),j*=parseFloat(p.data("tm-quantity"))),q=b(x,s,!1,!1,m),F=b(j,s,!1,!1,m),m.data("price",h(x,s,m)),m.data("original_price",h(j,s,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),x,q,j,F)}}}function ut(a){ie=[];var i;i=a?a:e.find(".cart"),i.length<=0||i.each(function(a,i){i=t(i);var r='input[name^="variation_id"]';i.find("input.variation_id").length>0&&(r="input.variation_id");var n=!0,c=t(this).closest(Gt),d=i.find(r).val(),s=!1,l=i.attr("data-product_id");if(l||(l=i.closest(".component_content").attr("data-product_id"),l||(l=0)),c.length>0){s=!0;var p=ct(c),m=dt(p);m&&(n=o(m))}d||(d=0);var f,_;s?(f=e.find(".tm-extra-product-options.tm-cart-"+l),_=e.find(".tm-epo-totals.tm-cart-"+l)):(f=Kt,_=ee);var u=_.data("fields-price-rules");if(f.data("tm_rules_init_done")||(_.data("force-quantity")&&i.find(E).val(_.data("force-quantity")),f.find(".tm-quantity .tm-qty").each(function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field");a.data("tm-quantity",e.val())}),f.find(".tmcp-attributes, .tmcp-elements").each(function(e,a){a=t(a);var i=a.data("rules"),o=a.data("original-rules");if("object"!=typeof i&&(i={0:"0"}),"object"!=typeof o&&(o={0:"0"}),"object"==typeof i){var r=pt(_,i[d],u),c=b(r,_),s=pt(_,o[d],u),l=b(s,_);a.find(".tmcp-field").each(function(e,a){var i=t(a);n?(i.data("price",h(r,_,i)),i.data("original_price",h(s,_,i)),y(i.closest(".tmcp-field-wrap").find(".tc-price"),r,c,s,l)):(i.data("price",0),i.data("original_price",0),i.closest(".tmcp-field-wrap").find(".amount").empty())})}}),f.data("tm_rules_init_done",1)),!n)return!0;var g={bto:c,cart:i,current_variation:d,is_bto:s,bundleid:l,totals:_,apply_dpd:u};f.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field").each(function(t,e){_t(e,g)})})}function gt(e){return t(e).find(".single_variation .price,.bundle_price .price,.bto_item_wrap .price,.component_wrap .price,.composite_wrap .price").not(".tc-price")}function ht(a,o){function r(e,a){var i,o=t(this),r=p.data("variations"),n=p.data("variations-subscription-sign-up-fee"),c=p.data("variations-subscription-period");r&&a&&a.variation_id&&n[a.variation_id]&&p.data("subscription-sign-up-fee",n[a.variation_id]),r&&a&&a.variation_id&&c[a.variation_id]&&p.data("subscription-period",c[a.variation_id]),r&&a&&a.variation_id&&void 0!==r[a.variation_id]?(i=r[a.variation_id],p.data("price",i)):a&&t(a.price_html).find(".amount:last").length&&(i=t(a.price_html).find(".amount:last").text(),i=i.replace(tm_epo_js.currency_format_thousand_sep,""),i=i.replace(tm_epo_js.currency_format_decimal_sep,"."),i=i.replace(/[^0-9.]/g,""),i=parseFloat(i),p.data("price",i)),l.find(".cpf-product-price").val(i),o.data("tm_variations_did_init",!0),o.data("tm-styled-variations")||m.trigger({type:"tm-epo-update"})}var n,d,l,p,m,f="main";a?(n=ct(a),f=lt(a),f||(f=a.attr("data-item_id")),d=e.find(".tm-extra-product-options.tm-cart-"+f),l=e.find(".tm-totals-form-"+f),p=e.find(".tm-epo-totals.tm-cart-"+f)):(Ht&&0!==Ht.length||(Ht=Kt.is(".tc-shortcode")?e:N(e,"form",c)),a=Ht.parent(),d=Kt,l=te,p=ee),m=o||Ht,p.data("tm_for_cart",m);var _='input[name^="variation_id"]';m.find("input.variation_id").length>0&&(_="input.variation_id"),p.data("variation_id_selector",m.find(_).not(".wceb_picker_wrap "+_)),p.data("qty_element",m.find(E).last());var v=p.data("type"),w=a.find(".variations_form");w.data("tc_product_id",c),d.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=K(a,!1),d=tt(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?e.data("tm-prev-value",i):e.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(e.val()),o=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),n=e.attr("step"),c=K(a,!1),d=tt(a,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(s=!1),c&&d&&s?a.data("tm-quantity",e.val()).trigger("change.cpf"):e.data("tm-prev-value")?e.val(e.data("tm-prev-value")):e.val(r)}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var e=t(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field");a.data("tm-quantity",e.val())}),d.find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(a){var i=t(this),o=i.attr("data-tm-for-variation").tmjid(),r="",n=i.closest(".cpf-type-variations"),c=i.closest(".cpf_hide_element").find(".tm-epo-variation-element");c.removeAttr("checked").prop("checked",!1),w.find("#"+o).val(r).change(),w.find("#"+o).trigger("focusin"),e.find(".cpf-type-variations").not(n).each(function(e,a){w.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}),d.find("input.tm-epo-variation-element,input.tm-epo-variation-element + label").off("mouseup.cpfv").on("mouseup.cpfv",function(e){var a=t(this);a.is("label")&&(a=a.prev("input")),a.attr("disabled")&&w.find(".reset_variations").trigger("click");var i=a.attr("data-tm-for-variation").tmjid();w.find("#"+i).trigger("focusin")}),d.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(a){var i=t(this),o=i.attr("data-tm-for-variation").tmjid(),r=i.val(),n=i.closest(".cpf-type-variations"),c=w.find("#"+o);if(a&&a.type&&"tm_epo_variation_element_change"==a.type);else{var d=!1;c.each(function(){if(this.value==r)return d=!0,!1}),d||c.trigger("focusin"),c.val(r).change()}r||c.trigger("focusin"),e.find(".cpf-type-variations").not(n).each(function(e,a){w.find("#"+t(a).find(".tm-epo-variation-element").first().attr("data-tm-for-variation").tmjid()).trigger("focusin")}),t(this).blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){if(t(this).is("select")){var e=t(this),a=e.attr("data-tm-for-variation").tmjid();w.find("#"+a).trigger("focusin"),w.trigger("woocommerce_update_variation_values_tmlogic")}}),d.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){if(!o||!Ht||void 0===Ht.data("per_product_pricing")||Ht.data("per_product_pricing")){var e=t(this),a=b(e.find("option:selected").data("price"),p,!1,!1,e),i=b(e.find("option:selected").data("original_price"),p,!1,!1,e);y(e.closest(".tmcp-field-wrap").find(".tc-price"),e.find("option:selected").data("price"),a,e.find("option:selected").data("original_price"),i);var r=e.closest(".tmcp-field-wrap").find(".tc-tooltip");r.length>0&&r.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed")}}).off("tm-select-change").on("tm-select-change",function(){o&&Ht&&void 0!==Ht.data("per_product_pricing")&&!Ht.data("per_product_pricing")||(t(this).trigger("tm-select-change-html"),m.trigger({type:"tm-epo-update",norules:1,element:t(this)}))}),d.find("select.tm-epo-field").trigger("tm-select-change-html"),d.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var e=t(this),a=t.fn.tm_template(Y.tc_chars_remanining,{maxlength:e.attr("maxlength"),characters_remaining:tm_epo_js.i18n_characters_remaining});e.after(t(a))}),d.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen keyup.tc_maxlen").on("change.tc_maxlen keyup.tc_maxlen",function(e){var a=t(this);a.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(a.attr("maxlength"))-parseInt(a.val().length))}),d.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(a){var i=t(this),o=t(this);if(o.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")){var r=o.closest(".tmcp-field-wrap").find("label img"),n=o.closest(".cpf-section"),c=n.is(".tm-epo-variation-section");if(o.is("select.tm-product-image")&&(i=o.children("option:selected")),t(r).length>0||c&&void 0!==i.attr("data-image")||void 0!==i.attr("data-image")&&""!==i.attr("data-image")||void 0!==i.attr("data-imagep")&&""!==i.attr("data-imagep"))if(o.is(":checked")||o.is("select.tm-product-image")&&""!==o.val()&&(""!==o.find("option:selected").attr("data-rules")||o.is(".tm-epo-variation-element"))){var s=t(r).first().attr("data-original");s||c||(s=t(r).first().attr("src")),s||(s=i.attr("data-image")),i.attr("data-imagep")&&(s=i.attr("data-imagep")),s?e.trigger("tm_change_product_image",{src:s,element:o,element_current:i,main_product:e,epo_holder:d}):e.trigger("tm_change_product_image",{src:!1,element:o,element_current:i,main_product:e,epo_holder:d})}else e.trigger("tm_restore_product_image",{element:o,element_current:i,main_product:e,epo_holder:d});else e.trigger("tm_restore_product_image",{element:o,element_current:i,main_product:e,epo_holder:d})}else e.trigger("tm_attempt_product_image",{element:o,element_current:i,main_product:e,epo_holder:d})}),d.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field"),o=!1;if(!i.is(".tm-epo-variation-element")){if(i.is("select"))""!==i.val()&&(o=!0);else if(i.is(":checkbox"))i.is(":checked")&&(o=!0);else if(i.is(":radio")){if(i.is(":checked")&&(o=!0,"yes"==tm_epo_js.tm_epo_show_only_active_quantities)){var r=i.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio");r.each(function(){t(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})}}else i.val()&&(o=!0);o?("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.show(),a.find(".tm-qty").removeClass("ignore")):("yes"==tm_epo_js.tm_epo_show_only_active_quantities&&a.hide(),a.find(".tm-qty").addClass("ignore")),setTimeout(function(){a.closest(".owl-carousel").trigger("refresh.owl.carousel")},200)}}),d.find(".tm-quantity").trigger("showhide.cpfcustom"),d.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(e){var a=t(this),i=a.closest(".tmcp-field-wrap").find(".tm-quantity");i.trigger("showhide.cpfcustom")}),d.find(".tm-epo-field").filter(":checkbox:checked, :radio:checked").not(".tm-epo-variation-element").each(function(){t(this).closest(".tmcp-field-wrap").addClass("tc-active")}),d.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(a){var i=t(this),o=i.closest(".tmcp-field-wrap"),r=i.closest(".tmcp-ul-wrap");if(!i.is(".tm-epo-variation-element")){if(i.is(":checkbox, :radio")&&(r.find(".tmcp-field-wrap").removeClass("tc-active"),i.is(":checked")?o.addClass("tc-active"):o.removeClass("tc-active")),i.is(".use_images:checkbox, .use_images:radio")&&i.attr("data-imagec")){var n=o.find(".radio_image,.checkbox_image").first();n.length>0&&(i.is(":checked")?n.prop("src",i.attr("data-imagec")):n.prop("src",i.attr("data-image")))}i.is(".use_images:radio")&&i.closest(".cpf-type-radio").find(".use_images:radio").not(i).each(function(){var e=t(this);e.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",e.attr("data-image"))}),i.is(".tmcp-range")&&i.trigger("change.cpflogic"),i.is("select")?i.trigger("tm-select-change"):(i.is(".tmcp-radio")&&i.closest(".cpf-type-radio").find(".tm-quantity .tm-qty").each(function(){t(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?t(this).removeAttr("disabled"):t(this).attr("disabled","disabled")}),m.trigger({type:"tm-epo-update",norules:1,element:i}))}i.trigger("tm_trigger_product_image"),e.trigger("tm_attempt_product_image",{element:i,main_product:e,epo_holder:d})}),d.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var e=t(this),a=e.closest(".cpf_hide_element"),i=a.find(".tm-epo-field.tmcp-radio:checked");i.length&&(i.removeAttr("checked").prop("checked",!1),i.trigger("change.cpf"),i.trigger("change.cpflogic"))}),d.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").off("keyup.cpf").on("keyup.cpf",function(){t(this).trigger("change.cpf")}),d.find(".tm-epo-field.tmcp-upload").off("change.cpfv").on("change.cpfv",function(){var e=t(this),a=e.closest("label"),i=e.closest(".tmcp-field-wrap"),o=i.find(".tm-filename"),r=e.val().replace("C:\\fakepath\\","");o.length<-0&&(o=t('<span class="tm-filename"></span>'),a.after(o)),o.html(r);var n=d.data("num_uploads");n||(n=[]),n[e.closest(".cpf_hide_element").attr("data-uniqid")]=r,d.data("num_uploads",n)}),a.find(E).last().off("change.cpf").on("change.cpf",function(){m.trigger("tm-epo-check-dpd"),t(this).data("tm-prev-value",t(this).val()),m.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",a.find(E).last().val()),m.on("woocommerce-product-addons-update",function(e){var a=t(this).find("#bkap_price_charged").val();l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),a.find(".total_price").off("wc-measurement-price-calculator-total-price-change.cpf").on("wc-measurement-price-calculator-total-price-change.cpf",function(t,e,a){var i="1"!==p.attr("data-prices-include-tax")&&"incl"===p.attr("data-tax-display-mode"),o="1"===p.attr("data-prices-include-tax")&&"incl"!==p.attr("data-tax-display-mode");i&&!o?a=g(a,p,null,i):!i&&o&&(a=u(a,p,null,o)),l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),a.find(".product_price").off("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf").on("wc-measurement-price-calculator-product-price-change.cpf dwc-measurement-price-calculator-update.cpf",function(t,e,a){var i="1"!==p.attr("data-prices-include-tax")&&"incl"===p.attr("data-tax-display-mode"),o="1"===p.attr("data-prices-include-tax")&&"incl"!==p.attr("data-tax-display-mode");i&&!o?a=g(a,p,null,i):!i&&o&&(a=u(a,p,null,o)),l.find(".cpf-product-price").val(a),p.data("price",a),m.trigger({type:"tm-epo-update"})}),m.off("woocommerce-nyp-update.cpf").on("woocommerce-nyp-update.cpf",function(){var t=m.find(".nyp"),e=t.data("price");t.length>0&&(l.find(".cpf-product-price").val(e),p.data("price",e),m.trigger({type:"tm-epo-update"}))}),U.off("woocommerce-nyp-updated.cpf").on("woocommerce-nyp-updated.cpf",function(){m.trigger("woocommerce-nyp-update.cpf")}),m.trigger("woocommerce-nyp-update.cpf"),t("#fancy-product-designer-"+p.parent().attr("data-product-id")).off("priceChange.cpf").on("priceChange.cpf",function(t,e,a){var i=a;void 0===p.data("fpdprice")?p.data("fpdprice",parseFloat(i)):p.data("fpdprice",parseFloat(i)),void 0===p.data("tcprice")?p.data("tcprice",parseFloat(p.data("price"))):p.data("price",parseFloat(p.data("tcprice"))),i=parseFloat(p.data("price"))+parseFloat(i),p.parent().find(".cpf-product-price").val(i),p.data("price",i),m.trigger({type:"tm-epo-update"})}),m.off("tm-epo-check-dpd").on("tm-epo-check-dpd",function(e){var a=p,i=a.data("fields-price-rules");if(1==i){var o=a.data("product-price-rules"),r=a.data("tm_for_cart");if(o&&r){var n='input[name^="variation_id"]';r.find("input.variation_id").length>0&&(n="input.variation_id");var c=r.find(E).last(),d=parseFloat(c.val()),s=parseFloat(c.data("tm-prev-value")),l=r.find(n).val();l||(l=0),isNaN(d)&&(a.attr("data-is-sold-individually")||0===c.length)&&(d=1),(o[l]&&0!==l||o[0])&&(o[l]||(l=0),t(o[l]).each(function(t,e){var a=parseFloat(e.min),i=parseFloat(e.max);a<=d&&d<=i&&(a<=s&&s<=i||ut(r))}))}}}),m.off("tm-epo-update").on("tm-epo-update",function(a){a.stopImmediatePropagation();var r,c=t(this),s=p.attr("data-tm-epo-final-total-box"),l=c.attr("data-product_id"),f=c.find("input.variation_id").length>0?"input.variation_id":'input[name^="variation_id"]',_=0,u=0,g=!1,v=0,y=p.data("type"),w=!1,k=c.find(E).last(),x=parseFloat(k.val()),j=m.find(".cpf-bto-price"),q=!0,F=!1,N=c.find(f).val(),C=p.attr("data-price-override"),z=[];if(l||(l=c.closest(".component_content").attr("data-product_id"),l||(l=0)),o&&p.addClass("cpf-bto-totals"),a.norules?(1==a.norules&&_t(a.element),ie=[],d.find(".tm-epo-late-field").each(function(){var e=t(this),a=e.data("tm-price-for-late");e.data("price",0),ie.push({setter:e,price:a,bundleid:l})})):ut(c),isNaN(x)&&(p.attr("data-is-sold-individually")||0===k.length)&&(x=1),p.length?_=ft(p):j.length>0&&(_=j.val()),u=_,o&&c.find(".cpf-bto-price").length>0?(F=!0,_=parseFloat(c.find(".cpf-bto-price").val()),q=c.find(".cpf-bto-price").data("per_product_pricing")):!o&&e.find(".cpf-bto-price").length>0&&(r=1,g=[],e.find(".cpf-bto-price").each(function(e,a){if(!isNaN(parseFloat(t(this).val()))){var i=t(this).closest(".cart").find(E);i=i.length>0?parseFloat(i.val()):1;var o=t(this).parent().find(".cpf-bto-totals").attr("data-is-sold-individually"),r=t(this).parent().find(".cpf-bto-optionsprice").val();r=isNaN(parseFloat(r))?0:parseFloat(r),_=parseFloat(_)+parseFloat(t(this).val()*i),g.push([t(this).val(),r,i,o])}}),e.find(".cpf-bto-optionsprice").each(function(e,a){isNaN(parseFloat(t(this).val()))||(_=parseFloat(_)+parseFloat(t(this).val()))})),_===!1)return void p.empty();(o||Ut&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement)&&("variable"!=y&&"variable-subscription"!=y||p.data("moved_inside")||(c.find(".variations_button").before(p),p.data("moved_inside",1))),Ut&&"woocommerce_before_add_to_cart_button"==tm_epo_js.tm_epo_totals_box_placement&&("bto"!=y&&"composite"!=y||p.data("moved_inside")||(c.find(".bundle_price,.composite_price").after(p),p.data("moved_inside",1))),d.find(".tmcp-field").each(function(){var e=t(this),a=e.closest(".cpf_hide_element"),o=a.attr("data-fblabelshow"),r=a.attr("data-fbvalueshow"),n=""===o?a.find(".tm-epo-field-label").html():"",c="",d=a.find(".tm-qty").val();if(void 0===d&&(d=""),e.is(":checkbox, :radio, :input")&&i(e)){var s=0;if(e.is(".tmcp-checkbox, .tmcp-radio"))if(e.is(":checked")){s=e.data("price"),w=!0,e.data("isset",1);var l=e.closest("li.tmcp-field-wrap"),p=l.find(".checkbox_image,.radio_image");c="";var m=e.closest("li.tmcp-field-wrap").find(".tm-label");m.length&&(c=m.html()),p.length&&(c+=p.clone().addClass("tc-img-floating")[0].outerHTML),e.is(".use_images")&&(c=l.find(".tc-label").first().html(),p.length&&(c+=p.clone().addClass("tc-img-floating")[0].outerHTML)),z.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r})}else e.data("isset",0);else if(e.is(".tmcp-select")){s=e.find("option:selected").data("price");var f=e.children("option:selected");""===f.val()&&""===f.attr("data-rulestype")||(w=!0),e.find("option").data("isset",0),e.find("option:selected").data("isset",1),""===e.find("option:selected").val()&&""===e.find("option:selected").attr("data-rulestype")||(c=e.find("option:selected").text(),z.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r}))}else if(e.val())if(e.is(".tmcp-range")&&"0"==e.val())e.data("isset",0);else{if(s=e.data("price"),w=!0,e.data("isset",1),c=e.val(),e.is(".tmcp-range")){var _=t(".tm-range-picker[data-field-id='"+e.attr("id")+"']"),u=_.attr("data-step").split(".");u=1==u.length?0:u[1].length,c=accounting.formatNumber(c,{decimal:T,thousand:D,precision:u})}z.push({title:n,value:c,price:s,quantity:d,label_show:o,value_show:r})}else e.data("isset",0);s||(s=0),v=parseFloat(v)+parseFloat(s)}}),p.data("tm-floating-box-data",z);var I=0,O=0;if(d.find(".tmcp-sub-fee-field,.tmcp-fee-field").each(function(){var e=t(this);if(e.is(":checkbox, :radio, :input")&&i(e)){var a=0;if(e.is(".tmcp-checkbox, .tmcp-radio"))e.is(":checked")?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);else if(e.is(".tmcp-select")){a=e.find("option:selected").data("price");var o=e.children("option:selected");""===o.val()&&""===o.attr("data-rulestype")||(w=!0),e.find("option").data("isset",0),e.find("option:selected").data("isset",1)}else e.val()?(a=e.data("price"),w=!0,e.data("isset",1)):e.data("isset",0);a||(a=0),e.is(".tmcp-sub-fee-field")&&(I=parseFloat(I)+parseFloat(a)),e.is(".tmcp-fee-field")&&(O=parseFloat(O)+parseFloat(a))}}),Qt=w,J(),O>0&&(w=!0),"bto"==p.attr("data-type")||"composite"==p.attr("data-type")){var S=ee.data("btois");"show"===S&&(w=!0)}r&&(w=!0),o&&!q&&(w=!1),"pxq"!=s&&"hide"!=s&&"normal"!=s&&"final"!=s&&"hideoptionsifzero"!=s||(w=!0),x>1&&(w=!0),"variable"!=y&&"variable-subscription"!=y||N||(w=!1);var A=v;_=h(_,p);var M=Lt(parseFloat(_)+parseFloat(A),l,p);"disable"==s&&(w=!1),"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_variation_price&&"yes"!=tm_epo_js.tm_epo_change_original_price||(w=!0);var L={};v=parseFloat(v*x);var P,R,H=0;tm_epo_js.extra_fee&&(H=parseFloat(tm_epo_js.extra_fee),isNaN(H)&&(H=0));var U=parseFloat(_*x);if(g){_=h(u,p),U=U=parseFloat(_*x);for(var W=0;W<g.length;W++){var Q=g[W],V=0;Q[3]?(V=h(parseFloat(Q[0])+parseFloat(Q[1]),p),_+=V,U+=parseFloat(V)):(V=+h(parseFloat(Q[0])*parseFloat(Q[2])+parseFloat(Q[1]),p),_+=V,U+=parseFloat(V*x))}}if(A+=M,v=parseFloat(A*x),"1"==C&&parseFloat(v)>0&&(_=u=0,U=parseFloat(_*x)),void 0!==p.data("tc_is_bookings")){var $=p.data("bookings_form"),K=0,tt=!1;$.length&&("1"==tm_epo_js.wc_booking_person_qty_multiplier&&$.find('[id^="wc_bookings_field_persons"]').each(function(){K+=parseFloat(t(this).val()),tt=!0}),"1"==tm_epo_js.wc_booking_block_qty_multiplier&&$.find("#wc_bookings_field_duration").length&&(K+=parseFloat($.find("#wc_bookings_field_duration").val()),tt=!0)),tt&&(v*=K)}v=t.tc_apply_filters("tc_adjust_total",v,p),O=t.tc_apply_filters("tc_adjust_totals_fee",O,p);
var et=parseFloat(v)+parseFloat(O);P=b(et,p,!0,!0),U=parseFloat(U+et+H),U=t.tc_apply_filters("tc_adjust_product_total_price",U,et,H,v,O,p),R=b(U,p,!0,!0);var at,it=!1,ot="",rt=!1,ct=!1,dt="",st=!1;if("pxq"==s||"final"==s||"hide"==s||0===et&&"hideoptionsifzero"==s||(it=!0),H&&(rt=!0,ot=b(H,p,!0,!0)),R&&(ct=!0),p.data("is-subscription")){var lt=parseFloat(p.data("subscription-sign-up-fee"))+parseFloat(I);lt&&(st=!0,dt=b(lt,p,!0,!0))}if((a.product_false===!0||void 0!==p.data("bookings_form_init")&&0===p.data("bookings_form_init"))&&(R="-"),L={options_total:tm_epo_js.i18n_options_total,formatted_options_total:P,show_options_total:it,extra_fee:tm_epo_js.i18n_extra_fee,formatted_extra_fee:ot,show_extra_fee:rt,final_total:tm_epo_js.i18n_final_total,formatted_final_total:R,show_final_total:ct,sign_up_fee:tm_epo_js.i18n_sign_up_fee,formatted_subscription_fee_total:dt,show_sign_up_fee:st},L=t.tc_apply_filters("tc_adjust_tc_totals_ob",L,{epo_object:ae,tm_set_price:b,product_total_price:U,product_price:_,qty:x}),at=t.fn.tm_template(Y.tc_final_totals,L),p.data("tm-html",at),p.data("tc_totals_ob",L),w&&x>0){if("disable_change"==s||"yes"==tm_epo_js.tm_epo_change_variation_price){var pt=t.tc_apply_filters("hide_native_price",!0);pt===!0&&"disable"!=s&&"disable_change"!=s?gt(c).hide():gt(c).show()}if("disable"==s||"disable_change"==s||"hideifoptionsiszero"==s&&0===et||"hide"==s)at="",p.html(at).hide(),te.hide();else{p.html(at).show(),te.show();var ht=p.data("fields-price-rules"),vt=p.data("tm-epo-dpd-prefix"),bt=p.data("tm-epo-dpd-suffix");if(1==ht){var yt=mt(p,ht),wt="";if(yt[0]&&yt[1]&&(vt||bt)){var kt=yt[1],xt="";switch(kt){case"percentage":xt=yt[0]+"%";break;case"price":xt=b(yt[0]*x,p,!1,!1);break;case"fixed":xt=b(yt[0],p,!1,!1)}wt=vt+" "+xt+" "+bt}wt&&p.find(".tm-final-totals .amount.final").after('<span class="tm_dpd_label">'+wt+"</span>")}}if(R&&U>=0){var jt=gt(c),qt=accounting.formatMoney(U,{symbol:"",decimal:T,thousand:D,precision:tm_epo_js.currency_format_num_decimals,format:""});"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_variation_price||jt.html(t.fn.tm_template(Y.tc_formatted_price,{price:qt})).show(),"disable_change"!=s&&"yes"!=tm_epo_js.tm_epo_change_original_price||(l&&o&&c.find(".cpf-bto-price").length>0?t("#component_"+l).find(X).html(t.fn.tm_template(Y.tc_formatted_price,{price:qt})).show():!o&&e.find(".cpf-bto-price").length>0?c.find(Z).html(t.fn.tm_template(Y.tc_formatted_price,{price:qt})).show():U>0?t(B).html(t.fn.tm_template(Y.tc_formatted_price,{price:qt})).show():t(B).html(tm_epo_js.current_free_text))}o?(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(v)),Ht.trigger({type:"tm-epo-update",norules:1})):(ee.data("is_active",!0),nt())}else gt(c).show().each(function(){t(this).data("tm-original-html")?t(this).html(t(this).data("tm-original-html")):t(this).data("tm-original-html",t(this).html())}),0===u&&"yes"==tm_epo_js.tm_epo_remove_free_price_label&&gt(c).hide(),p.empty().hide(),o&&(q&&c.find(".cpf-bto-optionsprice").val(parseFloat(v*x)),Ht.trigger({type:"tm-epo-update",norules:1})),nt();n&&e.find(".bto_form_"+n+",#composite_form_"+n+",#composite_data_"+n).trigger("cpf_bto_review"),Ht.trigger("tm-epo-after-update"),G.trigger("tc-epo-after-update",{epo:L})}),a.find(".variations_form").off("found_variation.tmepo tm_fix_stock",".single_variation_wrap").on("found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(e,i){F(t(this),a)}),"variable"!=v&&"variable-subscription"!=v||(a.find(".variations_form").off("found_variation.tmepo").on("found_variation.tmepo",function(e,i){r(e,i),F(t(this),a)}).off("hide_variation.tmepo").on("hide_variation.tmepo",function(t,e){m.trigger({type:"tm-epo-update",norules:2})}).trigger("check_variations"),G.on("tm-do-epo-update",function(){m.trigger({type:"tm-epo-update"})})),a.find(".variations select").off("blur.cpf").on("blur.cpf",function(){e.find(".variations_form").data("tm_variations_did_init",!0)}),At(a,f,e,d),e.find(".tm-variation-ul-color .tmhexcolorimage-li-nowh,.tm-variation-ul-image .tmhexcolorimage-li-nowh,ul.use_images_container .tmhexcolorimage-li-nowh,ul.use_colors_container .tmhexcolorimage-li-nowh").each(function(e,a){a=t(a);var i=.9*a.width(),o=a.find(".tmhexcolorimage");o.css({"min-width":i+"px","min-height":i+"px"})}),G.trigger("tm-epo-init-events",{epo:{epo_id:s,form:C(),current_cart:m,cart_container:a,epo_holder:d,totals_holder_container:l,totals_holder:p,main_cart:Ht,main_epo_inside_form:Ut,product_id_selector:$t,epo_id_selector:Jt,product_id:c,this_epo_container:Kt,this_totals_container:te,this_epo_totals_container:ee}}),G.trigger("epo_options_before_visible"),setTimeout(function(){d.css("opacity",0).addClass("tc-show").animate({opacity:1},M,"easeOutExpo",function(){G.trigger("epo_options_visible"),G.trigger("tmlazy")})},A)}function vt(){if(!e.data("tm-composite-setup")){var a=ee;e.data("tm-composite-setup",1),t(Gt).find(".cart").append('<input type="hidden" class="tm-post-support addon">'),e.find(".tm-post-support.addon").on("change",function(e){t(this).closest(Gt).trigger("wc-composite-item-updated.cpf")}),t(Gt).off("found_variation.cpf").on("found_variation.cpf",function(i,r){var n,c=t(this),d=ct(c),s=dt(d),l=lt(c);s&&(e.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(st(l)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+d+",#composite_data_"+d).find(st(l)).find(".amount").empty(),o(s)===!0&&(n=parseFloat(r.price)),c.find(".cpf-bto-price").data("per_product_pricing",o(s)),c.find(".cpf-bto-price").val(n),Ht.data("per_product_pricing",o(s)),c.find(".cart").trigger({type:"tm-epo-update",norules:1}),setTimeout(function(){Ht.trigger({type:"tm-epo-update",norules:1})},100),a.data("btois","none"))}).off("wc-composite-component-loaded.cpf").on("wc-composite-component-loaded.cpf",function(){t(this).trigger("wc-composite-item-updated.cpf")}).off("wc-composite-item-updated.cpf").on("wc-composite-item-updated.cpf",function(){wt(),e.find(".tm-collapse").tmtoggle();var a=t(this),i=a.find(".tm-extra-product-options");p(a),l(a),kt(a),xt(),f(i),_(i),r(i);var n,c=ct(a),d=dt(c),s=lt(a);e.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(st(s)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+c+",#composite_data_"+c).find(st(s)).find(".amount").empty(),d&&(o(d)===!0&&(n=parseFloat(a.find(".bto_item_data,.component_data").data("price"))),a.find(".cpf-bto-price").data("per_product_pricing",o(d)),a.find(".cpf-bto-price").val(n),Ht.data("per_product_pricing",o(d)),ht(a,a.find(".cart")),a.find(".cart").trigger({type:"tm-epo-update",composite_item:a}),Ht.trigger({type:"tm-epo-update",norules:1}),F(a.find(".cart"),a))}).off("change.cpfbto",".bto_item_options select,.component_options_select").on("change.cpfbto",".bto_item_options select,.component_options_select",function(i){var o=t(this),r=ct(o),n=lt(o);e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(st(n)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(st(n)).find(".amount").empty(),""===o.val()?(a.data("passed",!1),a.data("btois","none")):Ht.trigger({type:"tm-epo-update",norules:1})}).off("woocommerce_variation_select_change.cpf").on("woocommerce_variation_select_change.cpf",function(i){var o=t(this),r=ct(o),n=lt(o);e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(st(n)).removeData("cpf_review_price"),e.find(".bto_form,#composite_form_"+r+",#composite_data_"+r).find(st(n)).find(".amount").empty(),""===o.find(".variations .attribute-options select").val()&&(a.data("passed",!1),a.data("btois","none"))}),e.find(".bundle_wrap").off("show_bundle.cpf,wc-composite-show-add-to-cart.cpf").on("show_bundle.cpf,wc-composite-show-add-to-cart.cpf",function(){var e=t(this).closest(".cart").attr("data-container-id");yt(e)}),e.find(".composite_data .composite_wrap").off("wc-composite-show-add-to-cart.cpf").on("wc-composite-show-add-to-cart.cpf",function(){var a=t(this).closest(".composite_form"),i=a.find(".composite_data").data("container_id");yt(i),e.find("#composite_data_"+i).trigger("cpf_bto_review")}),e.find(".bto_form,.composite_form").off("woocommerce-product-addons-update.cpf cpf_bto_review").on("woocommerce-product-addons-update.cpf cpf_bto_review",function(){var e=t(this);e.parent().find(Gt).each(function(){var a,i=t(this),o=lt(i),r=e.find(st(o)),n=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+o),c=i.find(".cpf-bto-optionsprice").val(),d=e.find(".tc-epo-totals.tm-cart-"+o);r.length&&(r.data("cpf_review_price")?a=accounting.unformat(r.data("cpf_review_price"),T):r.find(".amount").length&&(a=accounting.unformat(r.find(".amount").html(),tm_epo_js.currency_format_decimal_sep),r.data("cpf_review_price",a)),c&&d.data("tc_totals_ob")&&(r.find(".amount").html(d.data("tc_totals_ob").formatted_final_total),n.find(".amount").html(d.data("tc_totals_ob").formatted_final_total)))})}),t(Gt).trigger("wc-composite-component-loaded.cpf")}}function bt(){t(".composite_data").on("wc-composite-initializing",function(a,i){i.actions.add_action("component_summary_content_updated",function(a){var i=e.find(".bto_form,.composite_form"),o=e.find("#composite_summary_"+i.data("product_id")).find(".summary_element.summary_element_"+a.step_id),r=t(".widget_composite_summary_elements").find(".summary_element.summary_element_"+a.step_id),n=i.find(".tc-epo-totals.tm-cart-"+a.step_id);n.data("tc_totals_ob")&&(o.find(".amount").html(n.data("tc_totals_ob").formatted_final_total),r.find(".amount").html(n.data("tc_totals_ob").formatted_final_total))},100,this)})}function yt(a){var i=!0,o=ee;e.find(".bto_form_"+a+",#composite_form_"+a+",#composite_data_"+a).parent().find(Gt).each(function(){var o=t(this),r=lt(o),n=e.find(".bto_form_"+a+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_form_"+a+" .bundle_wrap .bundle_button .form_data_"+r+",#composite_data_"+a+" .composite_wrap .composite_button .form_data_"+r),c=n.find("input.product_input").val(),d=n.find("input.quantity_input").val(),s=n.find("input.variation_input").val(),l=o.find(".bto_item_data,.component_data").data("product_type");void 0===l||""===l||""===c?i=!1:"none"!=l&&""===d?i=!1:"variable"==l&&void 0===s&&(i=!1)}),i?o.data("btois","show"):o.data("btois","none"),Ht.trigger({type:"tm-epo-update",norules:1})}function wt(){"yes"!=tm_epo_js.tm_epo_no_lazy_load&&(S?t(S).find("img.tmlazy").lazyLoadXT():t(".tc-extra-product-options img.tmlazy").lazyLoadXT())}function kt(e){e||(e=Kt),e.find(".tm-owl-slider-section").each(function(){var e=t(this),a=e.css("display");e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),e=e.find(".tm-owl-slider"),a=e.css("display"),e.show().addClass("owl-carousel").tmowlCarousel({dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[tm_epo_js.i18n_prev_text,tm_epo_js.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",a)})}function xt(e){e||(e=Kt.find(".tm-color-picker")),t(e).length&&(t(e).spectrum({showButtons:!0,clickoutFiresChange:!1,chooseText:tm_epo_js.closeText,cancelText:tm_epo_js.i18n_cancel}),t(e).spectrum("enable"))}function jt(e){var a=e.closest(".tmcp-field-wrap").find("label img"),i=t(a).first().attr("data-original");return e.is("select.tm-product-image")&&(e=e.children("option:selected")),i||(i=t(a).first().attr("src")),i||(i=e.attr("data-image")),e.attr("data-imagep")&&(i=e.attr("data-imagep")),!!i}function qt(e,a){var i=!1,o=t(".images"),r=t(".yith_magnifier_zoom"),n=o.find(".yith_magnifier_zoom").first().attr("href"),c=n,d=o.find(".yith_magnifier_zoom img").first().attr("src");window.yith_magnifier_options&&o.data("yith_magnifier")&&(i=!0);var s=!1,l=t(".iosSlider.product-gallery-slider,.iosSlider.product-slider");l.length&&l.iosSlider&&(s=!0);var p=!1,m=a.find(".images .fusion-flexslider");m.length&&m.flexslider&&(p=!0);var f=e.data("elevateZoom")||!1,_=a.find("div.product-images .woocommerce-main-image"),u=!1,g=a.find(".images .easyzoom");g.length&&g.filter(".images .easyzoom.first").data("easyZoom")&&(g=g.filter(".images .easyzoom.first").data("easyZoom"),u=!0),G.on("load",function(){setTimeout(function(){g.length&&g.data("easyZoom")&&(g=g.data("easyZoom"),u=!0)},150)});var h=!1,v=a.find(".woocommerce-product-gallery"),b=!1;if(v.length&&v.data("flexslider")&&(h=!0,t.isFunction(t.fn.zoom)&&window.wc_single_product_params&&window.wc_single_product_params.zoom_enabled)){var y=e.closest(".woocommerce-product-gallery__image");y.length>0&&e.width()>t(".woocommerce-product-gallery").width()&&(b=y,e.data.wc27_zoom_target=b)}var w={is_yith_wcmg:{type:"yith",enabled:i,element:o,yith_wcmg_zoom:r,_yith_wcmg_default_zoom:c,yith_wcmg_default_image:d},is_iosSlider:{type:"iosslider",enabled:s,element:l},is_flexslider:{type:"flexslider",enabled:p,element:m},is_elevateZoom:{type:"elevatezoom",enabled:f,element:_},is_easyzoom:{type:"easyzoom",enabled:u,element:g},is_wc27_gallery:{type:"woocommerce",enabled:h,element:v}};return w}function Ft(e,a,i,o,r,n,c){for(var d in e)if(e.hasOwnProperty(d)&&(d=e[d],d.enabled))switch(d.type){case"yith":if(a){a.attr("srcset",i).attr("src-orig",i),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy");var s={elements:{zoom:t(".yith_magnifier_zoom"),zoomImage:a,gallery:t(".yith_magnifier_gallery li a")}};d.element.yith_magnifier(t.extend(!0,{},window.yith_magnifier_options,s))}else o?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(window.yith_magnifier_options);break;case"iosslider":setTimeout(function(){d.element.iosSlider("update")},150);break;case"flexslider":G.trigger("resize");break;case"elevatezoom":d.element.each(function(){var e=t(this).data("elevateZoom");"undefined"!=typeof e&&e.swaptheimage(i,i)});break;case"easyzoom":d.element.swap(null,i);break;case"woocommerce":d.element.flexslider(0),window.setTimeout(function(){d.element.trigger("woocommerce_gallery_init_zoom"),G.trigger("resize")},10)}G.trigger("tm_gallery_compatibility_actions",{event_data:r,product_element:c,form:n})}function Nt(){var t=e.closest("#product-"+c);return t.length<=0&&(t=e.closest(".post-"+c)),t}function Ct(e){var a;return""!==tm_epo_js.tm_epo_global_product_image_selector?a=t(tm_epo_js.tm_epo_global_product_image_selector):(a=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first(),0===a.length&&(a=e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first())),t(a).length>1&&(a=t(a).first()),a}function zt(t,e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper "),n=r.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),c=e,d=e.closest("a");t&&t.image_link&&t.image_link&&t.image_link.length>1?(c.tc_set_attr("src",t.image_link,0),c.tc_set_attr("srcset",t.image_srcset,0),c.tc_set_attr("sizes",t.image_sizes,0),c.tc_set_attr("title",t.image_title,0),c.tc_set_attr("alt",t.image_alt,0),c.tc_set_attr("data-src",t.full_src,0),c.tc_set_attr("data-large_image",t.full_src,0),c.tc_set_attr("data-large_image_width",t.full_src_w,0),c.tc_set_attr("data-large_image_height",t.full_src_h,0),n.tc_set_attr("data-thumb",t.image_link,1),o.tc_set_attr("src",t.image_link,2),d.tc_set_attr("href",t.full_src,3),d.tc_set_attr("title",t.image_caption,3)):(c.tc_reset_attr("src",0),c.tc_reset_attr("srcset",0),c.tc_reset_attr("sizes",0),c.tc_reset_attr("title",0),c.tc_reset_attr("alt",0),c.tc_reset_attr("data-src",0),c.tc_reset_attr("data-large_image",0),c.tc_reset_attr("data-large_image_width",0),c.tc_reset_attr("data-large_image_height",0),n.tc_reset_attr("data-thumb",1),o.tc_reset_attr("src",2),d.tc_reset_attr("href",3),d.tc_reset_attr("title",3))}function Tt(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper "),n=r.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),c=e,d=e.closest("a");t.isEmptyObject(t.tc_product_image)?t.tc_product_image_store=t.tc_populate_store(e,a,i):t.tc_product_image_store=t.tc_maybe_copy_object_values(t.tc_product_image_store,t.tc_product_image),c.tc_update_attr("src",0),c.tc_update_attr("srcset",0),c.tc_update_attr("sizes",0),c.tc_update_attr("title",0),c.tc_update_attr("alt",0),c.tc_update_attr("data-src",0),c.tc_update_attr("data-large_image",0),c.tc_update_attr("data-large_image_width",0),c.tc_update_attr("data-large_image_height",0),n.tc_update_attr("data-thumb",1),o.tc_update_attr("src",2),d.tc_update_attr("href",3),d.tc_update_attr("title",3)}function Dt(e,a,i){var o=a.find(".flex-control-nav li:eq(0) img"),r=a.find(".woocommerce-product-gallery__wrapper "),n=r.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),c=e,d=e.closest("a");c.attr("data-o_src",t.tc_product_image_store[0].src),c.attr("data-o_srcset",t.tc_product_image_store[0].srcset),c.attr("data-o_sizes",t.tc_product_image_store[0].sizes),c.attr("data-o_title",t.tc_product_image_store[0].title),c.attr("data-o_alt",t.tc_product_image_store[0].alt),c.attr("data-o_data-src",t.tc_product_image_store[0]["data-src"]),c.attr("data-o_data-large_image",t.tc_product_image_store[0]["data-large_image"]),c.attr("data-o_data-large_image_width",t.tc_product_image_store[0]["data-large_image_width"]),c.attr("data-o_data-large_image_height",t.tc_product_image_store[0]["data-large_image_height"]),n.attr("data-o_data-thumb",t.tc_product_image_store[1]["data-thumb"]),o.attr("data-o_src",t.tc_product_image_store[2].src),d.attr("data-o_href",t.tc_product_image_store[3].href),d.attr("data-o_title",t.tc_product_image_store[3].title)}function It(){"inline"==window.tm_epo_js.tm_epo_global_product_image_mode?St():Ot()}function Ot(){var a,o,r=ae.form,n=e.closest("#product-"+c),d=[];a=Ct(n),o=qt(a,n),t(a).length>0&&(r.on("reset_image.tcpi",function(o){t.tc_product_image=t.tc_replace_object_values(t.tc_product_image,t.tc_product_image_store);var c=[];t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&c.push(e)}),c.length?c[c.length-1].trigger("tm_trigger_product_image"):t.tc_product_image_store=t.tc_populate_store(a,n,r)}),r.on("found_variation.tcpi",function(o,c){Tt(a,n,r);var d=[];t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&d.push(e)}),d.length&&(Dt(a,n,r),d[d.length-1].trigger("tm_trigger_product_image"))}),t.tc_product_image_store=t.tc_maybe_copy_object_values_from_img(t.tc_product_image_store,a,n,r),e.off("tm_change_product_image").on("tm_change_product_image",function(c,s){var l=s.element,p=s.element_current;if(l&&p){var m=l.data("imagep"),f=""!==m?"imagep":"image",_=s.element_current.data("image-variations");if(_&&(_=_[f]),d=[],t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);e.is("option")&&(e=e.closest("select")),i(e)&&""!==e.val()&&d.push(e)}),d.length&&!d[d.length-1].is(l))return;zt(_,a,n,r),Ft(o,a,_.image_link,!1,s,r,n)}}),e.off("tm_restore_product_image").on("tm_restore_product_image",function(c,d){var s=d.element,l=[];return s&&(t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&l.push(e)}),l.length&&!l[l.length-1].is(s))?void l[l.length-1].trigger("tm_trigger_product_image"):(zt(!1,a,n,r),void Ft(o,!1,a.attr("src"),!1,d,r,n))}),e.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){}),d=[],t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&d.push(e)}),d.length&&d[d.length-1].trigger("tm_trigger_product_image")),G.trigger("tm_product_image_loaded")}function St(){var a,o,r=ae.form,n=Nt();if(a=Ct(n),o=qt(a,n),t(a).length>0){a.data("tm-current-image",!1);var s=a.closest("a"),l=a.attr("src"),p=a.width(),m=a.height();e.off("tm_change_product_image").on("tm_change_product_image",function(e,n){var s,l=n.element.closest(".cpf-section"),f=l.is(".tm-epo-variation-section"),_=f?l:n.epo_holder,u=_.find(".tm-product-image:checked,select.tm-product-image"),g=[],h="",v=n.element.attr("id"),b=!0,y=n.main_product,w=y.closest("#product-"+c),k=p,x=m,j=t("<div class='blockUI blockOverlay tm-preloader-img'></div>");w.length<=0&&(w=y.closest(".post-"+c)),s=w.find("#"+v+"_tmimage"),0===s.length&&(s=a);var q=function(){j.remove(),r.tc_image_update(!1),a.data("tm-current-image",!1),w.find(".tm-clone-product-image").hide(),a.show()};if(n.src!=s.attr("src")||!s.is(":visible")){if(n.src===!1)return void q();j.css({width:k,height:x}),u.each(function(){var e=t(this);i(e)&&jt(e)&&d({element:e.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&g.push(e)}),g.length&&(u=g[g.length-1],h=u.attr("id")),u.attr("id")!=n.element.attr("id")&&(b=!1);var F=a.tm_clone(),N=new Image;F.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),b&&a.before(j),o.is_yith_wcmg.yith_wcmg_default_zoom=o.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),o.is_yith_wcmg.yith_wcmg_default_image=o.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),N.onerror=function(){q()},N.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();w.find("#"+v+"_tmimage").remove(),w.find(".tm-clone-product-image").hide(),F.prop("src",N.src).hide(),a.hide().after(F),F.css("opacity",0).show(),Ft(o,F,N.src),j.animate({opacity:0},750,"easeOutExpo",function(){j.remove()}),F.animate({opacity:1},window.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),G.trigger("tm_change_product_image_loaded",{src:n.src,element:n.element,main_product:n.main_product,epo_holder:n.epo_holder})},F.attr("id",v+"_tmimage").addClass("tm-clone-product-image").hide(),F.attr("src-orig")&&F.attr("src-orig",n.src),b?(N.src=n.src,r.tc_image_update(n.element,F),a.data("tm-current-image",v),G.trigger("tm_change_product_image_show",{src:n.src,element:n.element,main_product:n.main_product,epo_holder:n.epo_holder})):(F.prop("src",n.src).hide(),a.after(F)),G.trigger("tm_change_product_image_end",{src:n.src,element:n.element,main_product:n.main_product,epo_holder:n.epo_holder})}}),e.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){G.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});var i,n,d,p,m,f=e.element.attr("id"),_=e.main_product,u=_.closest("#product-"+c),g=e.element.closest(".cpf-section"),h=g.is(".tm-epo-variation-section"),v=h?g:e.epo_holder,b=!1;if(u.length<=0&&(u=_.closest(".post-"+c)),d=u.find("#"+f+"_tmimage").is(":visible"),u.find("#"+f+"_tmimage").remove(),0===u.find(".tm-clone-product-image").length)a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{if(!d)return void G.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});p=u.find(".tm-clone-product-image").length,f=a.data("tm-current-image");for(var y=p-1;y>=0;y--){if(n=u.find(".tm-clone-product-image").eq(y),i=n.attr("id").replace("_tmimage",""),m=v.find('[id="'+i+'"]'),m.is(":checked")&&m.closest(".cpf_hide_element").is(":visible")){u.find(".tm-clone-product-image").eq(y).show(),s.attr("href",u.find(".tm-clone-product-image").eq(y).prop("src")),a.data("tm-current-image",i),b=!0;break}u.find(".tm-clone-product-image").eq(y).hide()}b?u.find("#"+f+"_tmimage").remove():(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}Ft(o,!1,b?n.attr("src"):l,u.find(".tm-clone-product-image").filter(":visible").length),G.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),e.off("tm_attempt_product_image").on("tm_attempt_product_image",function(e,n){var p,m,f,_,u=n.main_product,g=u.closest("#product-"+c),h=n.element?n.element.closest(".cpf-section"):t(u.find(".tm-epo-variation-section"),n.epo_holder),v=h.is(".tm-epo-variation-section"),b=v?h:n.epo_holder,y=b.find(".tm-product-image:checked,select.tm-product-image"),w=[],k="",x=!1,j=a.data("tm-current-image");if(g.length<=0&&(g=u.closest(".post-"+c)),b=u.find(".tm-epo-variation-section").add(n.epo_holder),y=b.find(".tm-product-image:checked,select.tm-product-image"),y.each(function(){var e=t(this);i(e)&&jt(e)&&d({element:e.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&w.push(e)}),w.length&&(y=w[w.length-1],k=y.attr("id")),w.length&&y.length&&(!j||k!=j))return void y.last().trigger("tm_trigger_product_image");var q=b.find('[id="'+j+'"]').closest(".cpf_hide_element");if(j&&(q.data("isactive")===!1||q.closest(".cpf-section").data("isactive")===!1)){if(g.find("#"+j+"_tmimage").remove(),f=g.find(".tm-clone-product-image").length,0===f)a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1);else{for(var F=f-1;F>=0;F--){if(p=g.find(".tm-clone-product-image").eq(F),m=p.attr("id").replace("_tmimage",""),_=b.find('[id="'+m+'"]'),_.is(":checked")&&_.closest(".cpf_hide_element").is(":visible")){g.find(".tm-clone-product-image").eq(F).show(),s.attr("href",g.find(".tm-clone-product-image").eq(F).prop("src")),a.data("tm-current-image",m),x=!0;break}g.find(".tm-clone-product-image").eq(F).hide()}x||(a.show(),a.data("tm-current-image",!1),r.tc_image_update(!1))}Ft(o,!1,x?p.attr("src"):l,g.find(".tm-clone-product-image").filter(":visible").length)}});var f=[];t(Kt.find(".tm-product-image:checked,select.tm-product-image")).add(e.find(".tm-epo-variation-section").find(".tm-product-image:checked,select.tm-product-image")).each(function(){var e=t(this);i(e)&&""!==e.val()&&f.push(e)}),f.length&&f[f.length-1].trigger("tm_trigger_product_image")}G.trigger("tm_product_image_loaded")}function At(e,a,i,o){var r='input[name^="variation_id"]';if(e.find("input.variation_id").length>0&&(r="input.variation_id"),o.find(".tm-epo-variation-element").length||o.data("tm-epo-variation-element")){o.data("tm-epo-variation-element",o.find(".tm-epo-variation-element"));var n,c=o.find(".tm-epo-variation-section");if(a&&"main"!=a)n=c.closest("li.tm-extra-product-options-field"),e.find(".variations").hide().after(c.addClass("tm-extra-product-options nopadding")),n.is(":empty")&&n.hide(),e.off("wc_variation_form.tmlogic").on("wc_variation_form.tmlogic",function(){e.find(".variations_form").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),G.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var t=0;t<O.length;t++){var a=O[t],o=typeof a;if("object"==o){var n="string"==typeof a.name||!1,c="string"==typeof a.selector||!1,d="function"==typeof a.func||!1;n&&d&&('input[name="variation_id"]'==c&&(c=r),a.selector?e.data("tm-styled-variations",1).off(a.name,a.selector).on(a.name,a.selector,a.func):e.data("tm-styled-variations",1).off(a.name).on(a.name,a.func))}}O=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")});else{e=e.find(".variations_form"),e.find(".variations").hide(),n=c.closest("li.tm-extra-product-options-field"),e.find(".variations").hide().after(c.addClass("tm-extra-product-options nopadding")),n.is(":empty")&&n.hide(),e.off("click.tmlogic",".reset_variations").on("click.tmlogic",".reset_variations",function(t){e.find(".tm-epo-variation-element").closest("li").show(),e.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),e.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1),G.trigger("tmlazy"),i.find(".tm-epo-variation-element").trigger("tm_trigger_product_image")}),e.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(t,a){j(e)});for(var d=0;d<O.length;d++){var s=O[d],l=typeof s;if("object"==l){var p="string"==typeof s.name||!1,m="string"==typeof s.selector||!1,f="function"==typeof s.func||!1;p&&f&&('input[name="variation_id"]'==m&&(m=r),s.selector?e.data("tm-styled-variations",1).off(s.name,s.selector).on(s.name,s.selector,s.func):e.data("tm-styled-variations",1).off(s.name).on(s.name,s.func))}}O=[],e.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}Zt[Zt.length]={trigger:function(){return!0},on_true:function(){return i.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){i.find(".tm-epo-variation-element").removeAttr("disabled")}};var _=i.find(".tm-variation-ul-color").find("li");_.each(function(e,a){a=t(a);var i=.9*a.width(),o=a.find(".tmhexcolorimage");o.css({"min-width":i+"px","min-height":i+"px"})})}}function Mt(){var e=ee,a=e.attr("data-theme-name");if(a){a=a.toLowerCase();var i=Kt.find("select");switch(a){case"flatsome":case"flatsome-child":case"flatsome child":i.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":i.wrap('<div class="avada-select-parent tm-select-parent"></div>'),t('<div class="select-arrow">&#xe61f;</div>').appendTo(Kt.find(".tm-select-parent")),window.calc_select_arrow_dimensions&&calc_select_arrow_dimensions();break;case"bazar":case"bazar-child":case"bazar child":i.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":var o=function(){setTimeout(function(){var e=t(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible");e.each(function(){t(this).is(".mpcthSelect")||(t(this).width(t(this).outerWidth()),t(this).customSelect({customClass:"mpcthSelect"}))})},100)};G.on("cpflogicrun",function(){o()}),G.on("epo_options_visible",function(){o()});break;case"handmade":case"handmade child theme":t(".tm-owl-slider.owl-carousel").addClass("manual")}G.trigger("tm-theme-specific-actions",{epo:{theme_name:a,all_epo_selects:i}})}Q.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){t(this).closest(".quantity").find(E).trigger("change.cpf")})}function Lt(e,a,o){var r=0;return t.each(ie,function(n,c){var d,s,l=c.price,p=c.original_price,m=c.setter,f=c.bundleid,_=m;m.is("option")&&(_=m.closest("select")),d=_.attr("name").tmjid();var u=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-product-id"),g=t(".tc-totals-form.tm-totals-form-"+o.attr("data-cart-id")).attr("data-epo-id");s=t(".tc-extra-product-options.tm-product-id-"+u+"[data-epo-id='"+g+"']").find("#"+d+"_hidden");var w,k;f==a?(l=l/100*e,p=p/100*e,_.data("tm-quantity")&&(l*=parseFloat(_.data("tm-quantity")),
p*=parseFloat(_.data("tm-quantity"))),1==m.data("isset")&&i(m)&&(r+=l),w=b(l,o,!0,!1,m),k=b(p,o,!0,!1,m),m.data("price",h(l,o,m)),m.data("pricew",h(l,o,m)),m.data("original_price",h(p,o,m)),m.data("original_pricew",h(p,o,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),l,w,p,k),0===s.length&&_.before('<input type="hidden" id="'+d+'_hidden" name="'+d+'_hidden" value="'+v(l,o,m)+'" />'),m.is(".tm-epo-field.tmcp-radio")?m.is(":checked")&&s.val(v(l,o,m)):s.val(v(l,o,m))):void 0!==m.data("pricew")&&(w=b(m.data("pricew"),o,!0,!1,m),k="",void 0!==m.data("original_pricew")&&(k=b(m.data("original_pricew"),o,!0,!1,m)),y(m.closest(".tmcp-field-wrap").find(".tc-price"),m.data("pricew"),w,m.data("original_pricew"),k))}),ie=[],r}function Pt(){Kt.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var e=t(this);K(e,!0),tt(e,!0)});var e=Kt.find(".tm-exactlimit");e.length&&at(e);var a=Kt.find(".tm-minimumlimit");a.length&&ot(a)}function Rt(){"yes"==tm_epo_js.tm_epo_upload_popup&&(Zt[Zt.length]={trigger:function(){return!0},on_true:function(){var e=Kt.data("num_uploads");return e&&t("body").tm_floatbox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tm_wrapper",data:t.fn.tm_template(Y.tc_upload_messages,{files:e,title:tm_epo_js.i18n_uploading_files,message:tm_epo_js.i18n_uploading_message})}),!0},on_false:function(){return!0}})}function Et(e){e=t(e),f(e),_(e),r(e),ut(),ie=[],ht(),It(),vt(),Ht.trigger("tm-epo-check-dpd"),Ht.trigger({type:"tm-epo-update"})}e=t(e),G.on("tc_manual_init",function(t,e){Et(e)}),G.trigger("tm-epo-init-start");var Ht=!1,Ut=!1,Wt=!1,Zt=[],Xt=!1,Bt="undefined"!=typeof c,Gt=".bto_item,.component",Qt=!1,Yt=!1;if(Bt||e.is(".product")&&(Yt=!0,Bt=U.find(L).length),!Bt&&"no"==tm_epo_js.tm_epo_enable_final_total_box_all&&!e.is(".tm-no-options-composite"))return void G.trigger("tm-epo-init-end-no-options");if(Yt&&(G.trigger("tm-epo-init-no-options"),!e.is(".product")||e.is(".tm-no-options-pxq")||e.is(".tm-no-options-composite")||(e=U)),!c){var Vt=e.find(P).last();Vt.length>0?c=Vt.val():(Vt=t(".tc-totals-form.tm-totals-form-main"),c=Vt.attr("data-product-id")),c||(c="")}s||(s=parseInt(e.find("input.tm-epo-counter").last().val()),isNaN(s)&&(s=""));var $t=".tm-product-id-"+c,Jt='[data-epo-id="'+s+'"]',Kt=t(".tc-extra-product-options"+$t+Jt),te=t(".tc-totals-form"+$t+Jt),ee=t(".tc-epo-totals"+$t+Jt);$(),Ht.data("product_id",c).data("epo_id",s).data("product_id_selector",$t).data("epo_id_selector",Jt),Pt(),Rt(),p(),l(),m(),nt(),t.tm_tooltip(Kt.find(".tm-tooltip")),Kt.find(".tm-collapse").tmtoggle(),Kt.find(".tm-section-link").tmsectionpoplink();var ae={main_product:e,main_cart:Ht,epo_id:s,form:C(),main_epo_inside_form:Ut,product_id_selector:$t,epo_id_selector:Jt,product_id:c,this_epo_container:Kt,this_totals_container:te,this_epo_totals_container:ee};t(ae.form).data("epo_object",ae);var ie=[],oe=e.find(".variations_form");if(oe.length>0){var re=function(){oe.on("wc_variation_form.cpf",function(){oe.data("tc_loaded")||(f(Kt),_(Kt),r(Kt),ie=[],ht(),It(),setTimeout(function(){Ht.trigger({type:"tm-epo-update"})},10),oe.data("tc_loaded",!0))}),W&&oe.trigger("wc_variation_form.cpf")},ne=!1;if(t(".variation_form_section .variations-table").length&&(ne=!0),ne){var ce=function(){var t=requestAnimationFrame(ce),e=oe.data("bound");e&&(cancelAnimationFrame(t),re(),oe.trigger("wc_variation_form.cpf"))};ce()}else re()}else setTimeout(function(){f(Kt),_(Kt),r(Kt),ie=[],ht(),It(),vt(),Ht.trigger("tm-epo-check-dpd"),Ht.trigger({type:"tm-epo-update"})},20),bt();wt(),kt(),xt(),q(),k(),J(),Mt(),I(),G.trigger("tm-epo-init-end",{epo:ae})}function C(e){"no"==tm_epo_js.tm_epo_no_lazy_load&&t.extend(t.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:t.lazyLoadXT.updateEvent+" tmlazy"});var a=t(".tm-no-options-pxq, .tm-no-options-composite");a.length>0&&a.each(function(e,a){var i=t(a);N(i,!1)});try{var i=t(L).not(".tm-no-options-pxq, .tm-no-options-composite");i.length>0&&i.each(function(e,a){var i=t(this),o=i.attr("data-product-id"),r=i.attr("data-epo-id"),n=!1,c=t(P+'[value="'+o+'"]').closest("form,.cart").first().parent();c.length<=0&&(c=t(R+'[value="'+o+'"]').closest("form,.cart").first().parent(),c.length<=0&&(c=i.closest("form,.cart").first().parent(".tm-has-options"),c.length<=0&&i.is(".tc-shortcode")&&(c=i.parent()),c.length>0&&(n=!0,i.closest("form,.cart").first().append(t('<input name="add-to-cart" value="'+o+'" type="hidden" />')),i.closest("form,.cart").first().append(t('<input type="hidden" value="" class="variation_id" name="variation_id">'))))),c.length>0&&(c.is("form")&&(c=c.parent()),N(c,n,o,r))})}catch(t){}}String.prototype.tmunformat=function(){var t=accounting.unformat(this,z),e=parseFloat(t);return isNaN(e)?t:e},String.prototype.tmtoFloat=function(){var t=this,e=parseFloat(t);return isNaN(e)?t:e},String.prototype.tm_isNumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)};var z=""===tm_epo_js.tm_epo_global_input_decimal_separator?tm_epo_js.currency_format_decimal_sep:e(),T=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_decimal_sep:e(),D=""===tm_epo_js.tm_epo_global_displayed_decimal_separator?tm_epo_js.currency_format_thousand_sep:","==e()?".":",",I=!1,O=[],S=!1,A=window.tc_epo_delay||500,M=window.tc_epo_animation_delay||500,L=".tc-extra-product-options",P='input[name="add-to-cart"]',R="input.tc-add-to-cart",E='input.qty,input[name="quantity"],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount',H=".add_to_cart_button, .single_add_to_cart_button",U=t("body"),W=!1,Z=".composite_data .composite_wrap .price .amount",X=".component_wrap .price",B=".woocommerce div.product p.price",G=t(window),Q=t(document),Y={price:wp.template("tc-price"),sale_price:wp.template("tc-sale-price"),tc_section_pop_link:wp.template("tc-section-pop-link"),tc_floating_box:wp.template("tc-floating-box"),tc_floating_box_nks:wp.template("tc-floating-box-nks"),tc_chars_remanining:wp.template("tc-chars-remanining"),tc_final_totals:wp.template("tc-final-totals"),tc_lightbox:wp.template("tc-lightbox"),tc_lightbox_zoom:wp.template("tc-lightbox-zoom"),tc_formatted_price:wp.template("tc-formatted-price"),tc_upload_messages:wp.template("tc-upload-messages")};Y=t.tc_apply_filters("tc_adjust_template_engine",Y),t.extend(t.tc_validator.messages,{required:tm_epo_js.tm_epo_global_validator_messages.required,email:tm_epo_js.tm_epo_global_validator_messages.email,url:tm_epo_js.tm_epo_global_validator_messages.url,number:tm_epo_js.tm_epo_global_validator_messages.number,digits:tm_epo_js.tm_epo_global_validator_messages.digits,maxlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.maxlength),minlength:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.minlength),max:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.max),min:t.tc_validator.format(tm_epo_js.tm_epo_global_validator_messages.min)}),t.fn.tm_find_matching_variations=function(e,a){var i=[];if(e)for(var o=0;o<e.length;o++){var r=e[o];t.fn.tm_variations_match(r.attributes,a)&&i.push(r)}return i},t.fn.tm_variations_match=function(t,e){var a=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=e[i];void 0!==o&&void 0!==r&&0!==o.length&&0!==r.length&&o!==r&&(a=!1)}return a},t().tclightbox||(t.fn.tclightbox=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this);if(!e.is(".tcinit")){var a=e.attr("src")||e.attr("data-original"),i=e.closest("label"),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+i.attr("for")+"']");if(a=o.attr("data-imagel")||o.attr("data-imagep")||o.attr("data-image")||a){e.addClass("tcinit").before(t.fn.tm_template(Y.tc_lightbox,{}));var r=e.prev();r.prepend(e);var n=r.find(".tc-lightbox-button"),c=new Image;c.src=a,c.onload=function(){n.addClass("tcinit").on("click.tclightbox",function(){if(!(t(".tc-closing.tc-lightbox").length>0)){var e=t.tm_getPageSize(),i=t("<img>").addClass("tc-lightbox-img").attr("src",a).css("maxHeight",e[3]+"px"),o=t("body").tm_floatbox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomIn",animateOut:"tc-lightbox-zoomOut",data:t.fn.tm_template(Y.tc_lightbox_zoom,{img:i[0].outerHTML}),zIndex:102001});t(".tc-lightbox-img, .tc-lightbox-button-close").on("click",function(){o.cancelfunc()})}})}}}})},Q.ready(function(){t(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image").tclightbox()})),t().tmsectionpoplink||(t.fn.tmsectionpoplink=function(){var e=this;if(0!==e.length)return e.each(function(){var e=t(this),a=e.attr("data-sectionid"),i=e.attr("data-title")?e.attr("data-title"):tm_epo_js.i18n_addition_options,o=t('.cpf-section[data-uniqid="'+a+'"]'),r=!1,n=t('<div class="fl-overlay"></div>').css({zIndex:e.zIndex-1,opacity:.8}),c=function(){var e=t("#tm-section-pop-up");e.parents().removeClass("noanimated"),n.unbind().remove(),e.after(o),e.remove(),o.find(".tm-section-link").show(),o.find(".tm-section-pop").hide()};e.on("click.tmsectionpoplink",function(e){e.preventDefault(),r=!1,n.appendTo("body").click(c),o.before(t.fn.tm_template(Y.tc_section_pop_link,{title:i,close:tm_epo_js.i18n_close}));var a=t("#tm-section-pop-up");a.find(".float_editbox").prepend(o),o.find(".tm-section-link").hide(),o.find(".tm-section-pop").show(),a.parents().addClass("noanimated"),a.find(".details_cancel").click(function(){r||(r=!0,c())}),G.trigger("tmlazy")})})}),t().cpfdependson||(t.fn.cpfdependson=function(e,a,i,o){var n=this,c=0;if(0!==n.length&&"object"==typeof e)return a||(a="show"),i||(i="all"),t.each(e,function(a,i){if("object"!=typeof e)return!0;var n=p(i.element);n&&n.length>0&&(n.each(function(e,a){var i=t(a),n=i.closest("form"),c=t(".tc-extra-product-options"+n.data("product_id_selector")+n.data("epo_id_selector"));if(a&&i.length>0&&(!i.data("tmhaslogicevents")||o)){if(i.is(".tm-epo-variation-element"))w("found_variation.tmlogic",!1,function(t,e){r(c),G.trigger("tm-do-epo-update")}),w("hide_variation.tmlogic",!1,function(t,e){r(c),G.trigger("tm-do-epo-update")});else{var d="change.cpflogic";(i.is(":text")||i.is("textarea"))&&(d="change.cpflogic keyup.cpflogic"),i.off(d).on(d,function(t){r(c)})}i.data("tmhaslogicevents",1)}}),c++)}),n.each(function(o,r){var n=t(this),d=!1;switch(n.data("matches",c).data("toggle",a).data("what",i).data("fields",e),a){case"show":d=!1;break;case"hide":d=!0}d?n.removeClass("tc-hidden"):n.addClass("tc-hidden"),n.data("isactive",d)}),n.addClass("iscpfdependson").data("iscpfdependson",1),n.each(function(){t(this).addClass("is-epo-depend")})},t.fn.run_cpfdependson=function(){r()}),t.tcepo={temp_floatbox:!1,tm_init_epo:function(t,e,a,i){N(t,e,a,i)}},Q.ready(function(){G.on("tc_init_epo_plugin",function(t){C(t)}),t.ajaxPrefilter(function(e,a,i){if("yes"==tm_epo_js.tm_epo_enable_in_shop){var o=!1,r=e.url.split("?");if(r&&r.length>=1&&(r=r[1])){for(var n=r.split("&"),c=0;c<n.length;c++){var d=n[c].split("=");d.length>=1&&d[0]&&d[1]&&"wc-ajax"==d[0]&&"add_to_cart"==d[1]&&(o=!0)}o&&(e.originalsuccess=e.success,e.success=function(i){if(i&&i.error&&i.product_url){var o=t('.ajax_add_to_cart[data-product_id="'+a.data.product_id+'"]');o.removeClass("added"),o.removeClass("loading")}else e.originalsuccess.call(null,i)})}}if(a.data){var s=a.data;"string"==typeof a.data&&(s=a.data.tmparseParams());var l=a.url.slice(a.url.indexOf("?")+1).tmparseParams();if("quantity"in s&&(s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart)){var p=s.product_id||s["add-to-cart"]||l.product_id||l["add-to-cart"]||s.tcaddtocart,m=t(".tc-extra-product-options.tm-product-id-"+p);if(1==m.length){var f=t(".tc-totals-form.tm-product-id-"+p).find(".cpf-product-price").val(),_=t(".tc-totals-form.tm-product-id-"+p).find(".tc_form_prefix").val(),u={tcajax:1,tcaddtocart:p,cpf_product_price:f};_&&(u.tc_form_prefix=_),e.data=e.data+"&"+t.param(t.extend(m.tm_aserializeObject(),u),!1)}}}}),Q.ajaxSuccess(function(e,a,i){t(".tm-cart-link").tmpoplink();var o={quick_view_plugin:t(".woocommerce.quick-view").not("body"),theme_flatsome:t(".product-lightbox"),theme_kleo:t("#productModal"),yith_quick_view_plugin:t("#yith-quick-view-modal,.yith-quick-view.yith-modal,.yith-quick-view.yith-inline"),venedor_quick_view_plugin:t(".quickview-wrap"),rubbez_quick_view:t("#quickview-content"),jckqv_quick_view:t("#jckqv"),themify_quick_view:t("#product_single_wrapper"),porto_quick_view:t(".quickview-wrap"),woocommerce_product_layouts:t(".dhvc-woo-product-quickview"),nm_getproduct:t("#popup")},r=function(){var e=t(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))};for(var n in o)if(o.hasOwnProperty(n)&&o[n].length){if("yith_quick_view_plugin"==n&&o[n].find(".product").length<=0)continue;"jckqv_quick_view"!=n&&"yith_quick_view_plugin"!=n&&"theme_flatsome"!=n||(W=!0),S=o[n];var c=S.find(L).attr("data-product-id"),d=S.find(L).attr("data-epo-id");N(S,!0,c,d),G.trigger("tmlazy"),G.trigger("tm_epo_loaded_quickview"),t.jMaskGlobals&&S.find(t.jMaskGlobals.maskElements).each(r)}}),t("#wholesale_form").on("submit",function(){var e=t("form.cart").find(P).val(),a=t(L+'.tm-cart-main[data-product-id="'+e+'"]').tm_clone(),i=t('.tm-totals-form-main[data-product-id="'+e+'"]').tm_clone(),o=t('<div class="tm-hidden tm-formepo"></div>');return o.append(a),o.append(i),t(this).append(o),!0}),C(),t(".tm-cart-link").tmpoplink(),U.on("updated_checkout",function(){t(".tm-cart-link").tmpoplink()}),G.trigger("tmlazy"),G.trigger("tm_epo_loaded")})}(jQuery),function(t){t(document).ready(function(){t(document).on("click",".jckqv-qty-spinner",function(){t(this).closest(".quantity").find("input.qty").trigger("change")}),t(document).on("click","#add_to_quote",function(e){if(tm_epo_js&&"yes"==tm_epo_js.tm_epo_global_enable_validation){var a=t(this).parents("form");if(a.length>0&&!a.tc_validate().form())return void e.stopImmediatePropagation()}})})}(jQuery);